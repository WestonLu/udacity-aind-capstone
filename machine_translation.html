<!DOCTYPE html>
<!-- saved from url=(0057)http://localhost:8888/notebooks/machine_translation.ipynb -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    

    <title>machine_translation</title>
    <link rel="shortcut icon" type="image/x-icon" href="http://localhost:8888/static/base/images/favicon.ico?v=97c6417ed01bdc0ae3ef32ae4894fd03">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="./machine_translation_files/jquery-ui.min.css" type="text/css">
    <link rel="stylesheet" href="./machine_translation_files/jquery.typeahead.min.css" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    


<script type="text/javascript" src="./machine_translation_files/MathJax.js.下载" charset="utf-8"></script>

<script type="text/javascript">
// MathJax disabled, set as null to distingish from *missing* MathJax,
// where it will be undefined, and should prompt a dialog later.
window.mathjax_url = "/static/components/MathJax/MathJax.js";
</script>

<link rel="stylesheet" href="./machine_translation_files/bootstrap-tour.min.css" type="text/css">
<link rel="stylesheet" href="./machine_translation_files/codemirror.css">


    <link rel="stylesheet" href="./machine_translation_files/style.min.css" type="text/css">
    

<link rel="stylesheet" href="./machine_translation_files/override.css" type="text/css">
<link rel="stylesheet" href="http://localhost:8888/notebooks/machine_translation.ipynb" id="kernel-css" type="text/css">


    <link rel="stylesheet" href="./machine_translation_files/custom.css" type="text/css">
    <script src="./machine_translation_files/promise.min.js.下载" type="text/javascript" charset="utf-8"></script>
    <script src="./machine_translation_files/index.js.下载" type="text/javascript"></script>
    <script src="./machine_translation_files/index.js(1).下载" type="text/javascript"></script>
    <script src="./machine_translation_files/index.js(2).下载" type="text/javascript"></script>
    <script src="./machine_translation_files/require.js.下载" type="text/javascript" charset="utf-8"></script>
    <script>
      require.config({
          
          urlArgs: "v=20170822180050",
          
          baseUrl: '/static/',
          paths: {
            'auth/js/main': 'auth/js/main.min',
            custom : '/custom',
            nbextensions : '/nbextensions',
            kernelspecs : '/kernelspecs',
            underscore : 'components/underscore/underscore-min',
            backbone : 'components/backbone/backbone-min',
            jquery: 'components/jquery/jquery.min',
            bootstrap: 'components/bootstrap/js/bootstrap.min',
            bootstraptour: 'components/bootstrap-tour/build/js/bootstrap-tour.min',
            'jquery-ui': 'components/jquery-ui/ui/minified/jquery-ui.min',
            moment: 'components/moment/moment',
            codemirror: 'components/codemirror',
            termjs: 'components/xterm.js/dist/xterm',
            typeahead: 'components/jquery-typeahead/dist/jquery.typeahead.min',
          },
          map: { // for backward compatibility
              "*": {
                  "jqueryui": "jquery-ui",
              }
          },
          shim: {
            typeahead: {
              deps: ["jquery"],
              exports: "typeahead"
            },
            underscore: {
              exports: '_'
            },
            backbone: {
              deps: ["underscore", "jquery"],
              exports: "Backbone"
            },
            bootstrap: {
              deps: ["jquery"],
              exports: "bootstrap"
            },
            bootstraptour: {
              deps: ["bootstrap"],
              exports: "Tour"
            },
            "jquery-ui": {
              deps: ["jquery"],
              exports: "$"
            }
          },
          waitSeconds: 30,
      });

      require.config({
          map: {
              '*':{
                'contents': 'services/contents',
              }
          }
      });

      // error-catching custom.js shim.
      define("custom", function (require, exports, module) {
          try {
              var custom = require('custom/custom');
              console.debug('loaded custom.js');
              return custom;
          } catch (e) {
              console.error("error loading custom.js", e);
              return {};
          }
      })
    </script>

    
    

<script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="services/contents" src="./machine_translation_files/contents.js.下载"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="custom/custom" src="./machine_translation_files/custom.js.下载"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="nbextensions/widgetsnbextension" src="./machine_translation_files/widgetsnbextension.js.下载"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="nbextensions/jupyter-js-widgets/extension" src="./machine_translation_files/extension.js.下载"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="nbextensions/nbextensions_configurator/config_menu/main" src="./machine_translation_files/main.js.下载"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="nbextensions/contrib_nbextensions_help_item/main" src="./machine_translation_files/main.js(1).下载"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="nbextensions/toc2/main" src="./machine_translation_files/main.js(2).下载"></script><style type="text/css">div.MathJax_MathML {text-align: center; margin: .75em 0px; display: block!important}
.MathJax_MathML {font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
span.MathJax_MathML {display: inline!important}
.MathJax_mmlExBox {display: block!important; overflow: hidden; height: 1px; width: 60ex; min-height: 0; max-height: none; padding: 0; border: 0; margin: 0}
[class="MJX-tex-oldstyle"] {font-family: MathJax_Caligraphic, MathJax_Caligraphic-WEB}
[class="MJX-tex-oldstyle-bold"] {font-family: MathJax_Caligraphic, MathJax_Caligraphic-WEB; font-weight: bold}
[class="MJX-tex-caligraphic"] {font-family: MathJax_Caligraphic, MathJax_Caligraphic-WEB}
[class="MJX-tex-caligraphic-bold"] {font-family: MathJax_Caligraphic, MathJax_Caligraphic-WEB; font-weight: bold}
@font-face /*1*/ {font-family: MathJax_Caligraphic-WEB; src: url('http://localhost:8888/static/components/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf')}
@font-face /*2*/ {font-family: MathJax_Caligraphic-WEB; font-weight: bold; src: url('http://localhost:8888/static/components/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Bold.otf')}
[mathvariant="double-struck"] {font-family: MathJax_AMS, MathJax_AMS-WEB}
[mathvariant="script"] {font-family: MathJax_Script, MathJax_Script-WEB}
[mathvariant="fraktur"] {font-family: MathJax_Fraktur, MathJax_Fraktur-WEB}
[mathvariant="bold-script"] {font-family: MathJax_Script, MathJax_Caligraphic-WEB; font-weight: bold}
[mathvariant="bold-fraktur"] {font-family: MathJax_Fraktur, MathJax_Fraktur-WEB; font-weight: bold}
[mathvariant="monospace"] {font-family: monospace}
[mathvariant="sans-serif"] {font-family: sans-serif}
[mathvariant="bold-sans-serif"] {font-family: sans-serif; font-weight: bold}
[mathvariant="sans-serif-italic"] {font-family: sans-serif; font-style: italic}
[mathvariant="sans-serif-bold-italic"] {font-family: sans-serif; font-style: italic; font-weight: bold}
@font-face /*3*/ {font-family: MathJax_AMS-WEB; src: url('http://localhost:8888/static/components/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_AMS-Regular.otf')}
@font-face /*4*/ {font-family: MathJax_Script-WEB; src: url('http://localhost:8888/static/components/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Script-Regular.otf')}
@font-face /*5*/ {font-family: MathJax_Fraktur-WEB; src: url('http://localhost:8888/static/components/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Fraktur-Regular.otf')}
@font-face /*6*/ {font-family: MathJax_Fraktur-WEB; font-weight: bold; src: url('http://localhost:8888/static/components/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Fraktur-Bold.otf')}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style id="style-1-cropbar-clipper">/* Copyright 2014 Evernote Corporation. All rights reserved. */
.en-markup-crop-options {
    top: 18px !important;
    left: 50% !important;
    margin-left: -100px !important;
    width: 200px !important;
    border: 2px rgba(255,255,255,.38) solid !important;
    border-radius: 4px !important;
}

.en-markup-crop-options div div:first-of-type {
    margin-left: 0px !important;
}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 0; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Blank; src: url('about:blank')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="nbextensions/widgets/notebook/js/extension" src="./machine_translation_files/extension.js(1).下载"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="nbextensions/toc2/toc2" src="./machine_translation_files/toc2.js.下载"></script><link type="text/css" rel="stylesheet" href="./machine_translation_files/main.css"><style type="text/css">/*
 +------------------------------------------+
 | widget-area                              |
 |  +--------+---------------------------+  |
 |  | prompt | widget-subarea            |  |
 |  |        | +-----------------------+ |  |
 |  |        | |         widget        | |  |
 |  |        | +-----------------------+ |  |
 |  |        | +-----------------------+ |  |
 |  |        | |         widget        | |  |
 |  |        | +-----------------------+ |  |
 |  +--------+---------------------------+  |
 +------------------------------------------+
*/

.widget-area {
	page-break-inside : avoid;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
        -ms-flex-direction: row;
            flex-direction: row;
    -webkit-box-align: stretch;
        -ms-flex-align: stretch;
            align-items: stretch;
}

.widget-area.connection-problems .prompt:after {
    content: "\F127"; /* chain-broken */
    font-family: "FontAwesome";
    color: #d9534f;
    top: 3px;
    padding: 3px;
}

.widget-area .widget-subarea {
    min-width: 0px;
    padding: 0.4em 0 0.4em 0;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-flex: 2;
        -ms-flex: 2;
            flex: 2;
    -webkit-box-align: start;
        -ms-flex-align: start;
            align-items: flex-start;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
        -ms-flex-direction: column;
            flex-direction: column;
    -webkit-box-align: stretch;
        -ms-flex-align: stretch;
            align-items: stretch;
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
}
</style><style type="text/css">/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/


/*-----------------------------------------------------------------------------
| dom/cursor
|----------------------------------------------------------------------------*/


body.p-mod-override-cursor * {
  cursor: inherit !important;
}


/*-----------------------------------------------------------------------------
| ui/widget
|----------------------------------------------------------------------------*/


.p-Widget {
  box-sizing: border-box;
  position: relative;
  overflow: hidden;
  cursor: default;
}


.p-Widget.p-mod-hidden {
  display: none;
}


/*-----------------------------------------------------------------------------
| ui/commandpalette
|----------------------------------------------------------------------------*/


.p-CommandPalette {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}


.p-CommandPalette-search {
  -webkit-box-flex: 0;
      -ms-flex: 0 0 auto;
          flex: 0 0 auto;
}


.p-CommandPalette-content {
  -webkit-box-flex: 1;
      -ms-flex: 1 1 auto;
          flex: 1 1 auto;
  margin: 0;
  padding: 0;
  min-height: 0;
  overflow: auto;
  list-style-type: none;
}


.p-CommandPalette-header {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  text-transform: capitalize;
}


.p-CommandPalette-itemShortcut {
  float: right;
}


.p-CommandPalette-itemLabel {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}


/*-----------------------------------------------------------------------------
| ui/menu
|----------------------------------------------------------------------------*/


.p-Menu {
  position: absolute;
  white-space: nowrap;
  overflow-x: hidden;
  overflow-y: auto;
  outline: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}


.p-Menu-content {
  margin: 0;
  padding: 0;
  display: table;
  list-style-type: none;
}


.p-Menu-item {
  display: table-row;
}


.p-Menu-item.p-mod-hidden {
  display: none;
}


.p-Menu-itemIcon,
.p-Menu-itemSubmenuIcon {
  display: table-cell;
  text-align: center;
}


.p-Menu-itemLabel {
  display: table-cell;
  text-align: left;
}


.p-Menu-itemShortcut {
  display: table-cell;
  text-align: right;
}


/*-----------------------------------------------------------------------------
| ui/menubar
|----------------------------------------------------------------------------*/


.p-MenuBar {
  outline: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}


.p-MenuBar-content {
  margin: 0;
  padding: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
  list-style-type: none;
}


.p-MenuBar-item {
  box-sizing: border-box;
}


.p-MenuBar-itemIcon,
.p-MenuBar-itemLabel {
  display: inline-block;
}


/*-----------------------------------------------------------------------------
| ui/splitpanel
|----------------------------------------------------------------------------*/


.p-SplitPanel-child {
  z-index: 0;
}


.p-SplitPanel-handle {
  z-index: 1;
}


.p-SplitPanel-handle.p-mod-hidden {
  display: none;
}


.p-SplitPanel-handle:after {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  content: '';
}


.p-SplitPanel.p-mod-horizontal > .p-SplitPanel-handle {
  cursor: ew-resize;
}


.p-SplitPanel.p-mod-vertical > .p-SplitPanel-handle {
  cursor: ns-resize;
}


.p-SplitPanel.p-mod-horizontal > .p-SplitPanel-handle:after {
  left: 50%;
  min-width: 8px;
  -webkit-transform: translateX(-50%);
          transform: translateX(-50%);
}


.p-SplitPanel.p-mod-vertical > .p-SplitPanel-handle:after {
  top: 50%;
  min-height: 8px;
  -webkit-transform: translateY(-50%);
          transform: translateY(-50%);
}


/*-----------------------------------------------------------------------------
| ui/tabbar
|----------------------------------------------------------------------------*/


.p-TabBar {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}


.p-TabBar.p-mod-horizontal {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}


.p-TabBar.p-mod-vertical {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}


.p-TabBar-content {
  margin: 0;
  padding: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-flex: 1;
      -ms-flex: 1 1 auto;
          flex: 1 1 auto;
  list-style-type: none;
}


.p-TabBar.p-mod-horizontal > .p-TabBar-content {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}


.p-TabBar.p-mod-vertical > .p-TabBar-content {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}


.p-TabBar-tab {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
  box-sizing: border-box;
  overflow: hidden;
}


.p-TabBar-tabIcon,
.p-TabBar-tabCloseIcon {
  -webkit-box-flex: 0;
      -ms-flex: 0 0 auto;
          flex: 0 0 auto;
}


.p-TabBar-tabLabel {
  -webkit-box-flex: 1;
      -ms-flex: 1 1 auto;
          flex: 1 1 auto;
  overflow: hidden;
  white-space: nowrap;
}


.p-TabBar-tab.p-mod-hidden {
  display: none;
}


.p-TabBar.p-mod-dragging .p-TabBar-tab {
  position: relative;
}


.p-TabBar.p-mod-horizontal.p-mod-dragging .p-TabBar-tab {
  left: 0;
  -webkit-transition: left 150ms ease;
  transition: left 150ms ease;
}


.p-TabBar.p-mod-vertical.p-mod-dragging .p-TabBar-tab {
  top: 0;
  -webkit-transition: top 150ms ease;
  transition: top 150ms ease;
}


.p-TabBar.p-mod-dragging .p-TabBar-tab.p-mod-dragging {
  -webkit-transition: none;
  transition: none;
}


/*-----------------------------------------------------------------------------
| ui/tabpanel
|----------------------------------------------------------------------------*/


.p-TabPanel-tabBar {
  z-index: 1;
}


.p-TabPanel-stackedPanel {
  z-index: 0;
}


/*-----------------------------------------------------------------------------
| ui/dockpanel
|----------------------------------------------------------------------------*/


.p-DockPanel {
  z-index: 0;
}


.p-DockPanel-widget {
  z-index: 0;
}


.p-DockPanel-tabBar {
  z-index: 1;
}


.p-DockPanel-handle {
  z-index: 2;
}


.p-DockPanel-handle.p-mod-hidden {
  display: none;
}


.p-DockPanel-handle:after {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  content: '';
}


.p-DockPanel-handle.p-mod-horizontal {
  cursor: ew-resize;
}


.p-DockPanel-handle.p-mod-vertical {
  cursor: ns-resize;
}


.p-DockPanel-handle.p-mod-horizontal:after {
  left: 50%;
  min-width: 8px;
  -webkit-transform: translateX(-50%);
          transform: translateX(-50%);
}


.p-DockPanel-handle.p-mod-vertical:after {
  top: 50%;
  min-height: 8px;
  -webkit-transform: translateY(-50%);
          transform: translateY(-50%);
}


.p-DockPanel-overlay {
  z-index: 3;
  box-sizing: border-box;
  pointer-events: none;
}


.p-DockPanel-overlay.p-mod-hidden {
  display: none;
}
</style><style type="text/css">/* Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/* We import all of these together in a single css file because the Webpack
loader sees only one file at a time. This allows postcss to see the variable
definitions when they are used. */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/**
 * The material design colors are adapted from google-material-color v1.2.6
 * https://github.com/danlevan/google-material-color
 * https://github.com/danlevan/google-material-color/blob/f67ca5f4028b2f1b34862f64b0ca67323f91b088/dist/palette.var.css
 *
 * The license for the material design color CSS variables is as follows (see
 * https://github.com/danlevan/google-material-color/blob/f67ca5f4028b2f1b34862f64b0ca67323f91b088/LICENSE)
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 Dan Le Van
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

/*
The following CSS variables define the main, public API for styling JupyterLab.
These variables should be used by all plugins wherever possible. In other
words, plugins should not define custom colors, sizes, etc unless absolutely
necessary. This enables users to change the visual theme of JupyterLab
by changing these variables.

Many variables appear in an ordered sequence (0,1,2,3). These sequences
are designed to work well together, so for example, `--jp-border-color1` should
be used with `--jp-layout-color1`. The numbers have the following meanings:

* 0: super-primary, reserved for special emphasis
* 1: primary, most important under normal situations
* 2: secondary, next most important under normal situations
* 3: tertiary, next most important under normal situations

Throughout JupyterLab, we are mostly following principles from Google's
Material Design when selecting colors. We are not, however, following 
all of MD as it is not optimized for dense, information rich UIs.
*/

:root {

  /* Borders
  
  The following variables, specify the visual styling of borders in JupyterLab.
   */

  /* UI Fonts
  
  The UI font CSS variables are used for the typography all of the JupyterLab
  user interface elements that are not directly user generated content.
  */ /* Base font size */ /* Ensures px perfect FontAwesome icons */

  /* Use these font colors against the corresponding main layout colors.
     In a light theme, these go from dark to light.
  */
  
  /* Use these against the brand/accent/warn/error colors.
     These will typically go from light to darker, in both a dark and light theme
   */

  /* Content Fonts
  
  Content font variables are used for typography of user generated content.
  */ /* Base font size */

  /* Layout
  
  The following are the main layout colors use in JupyterLab. In a light
  theme these would go from light to dark.
  */

  /* Brand/accent */

  /* State colors (warn, error, success, info) */

}

/* Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*
 * We assume that the CSS variables in
 * https://github.com/jupyterlab/jupyterlab/blob/master/src/default-theme/variables.css
 * have been defined.
 */

:root { /* margin between inline elements */

    /* From Material Design Lite */
}

.jupyter-widgets {
    margin: 2px;
    box-sizing: border-box;
    color: black;
    overflow: visible;
}

.jp-Output-result > .jupyter-widgets {
    margin-left: 0;
    margin-right: 0;
}

/* vbox and hbox */

.widget-inline-hbox {
    /* Horizontal widgets */
    box-sizing: border-box;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
        -ms-flex-direction: row;
            flex-direction: row;
    -webkit-box-align: baseline;
        -ms-flex-align: baseline;
            align-items: baseline;
}

.widget-inline-vbox {
    /* Vertical Widgets */
    box-sizing: border-box;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
        -ms-flex-direction: column;
            flex-direction: column;
    -webkit-box-align: stretch;
        -ms-flex-align: stretch;
            align-items: stretch;
}

.widget-box {
    box-sizing: border-box;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    margin: 0;
}

.widget-hbox {
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
        -ms-flex-direction: row;
            flex-direction: row;
}

.widget-vbox {
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
        -ms-flex-direction: column;
            flex-direction: column;
}

/* General Button Styling */

.jupyter-button {
    padding: 0;
    display: inline-block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    text-align: center;
    font-size: 13px;
    cursor: pointer;

    height: 28px;
    border: 0px solid;
    line-height: 28px;
    box-shadow: none;

    color: rgba(0, 0, 0, .87);
    background-color: #EEEEEE;
    border-color: #E0E0E0;
    border: none;
}

.jupyter-button i.fa {
    margin-right: 4px;
    pointer-events: none;
}

.jupyter-button:empty:before {
    content: "\200B"; /* zero-width space */
}

.jupyter-button i.fa.center {
    margin-right: 0;
}

.jupyter-button:hover, .jupyter-button:focus {
    /* MD Lite 2dp shadow */
    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14),
                0 3px 1px -2px rgba(0, 0, 0, .2),
                0 1px 5px 0 rgba(0, 0, 0, .12);
}

.jupyter-button:active, .jupyter-button.mod-active {
    /* MD Lite 4dp shadow */
    box-shadow: 0 4px 5px 0 rgba(0, 0, 0, .14),
                0 1px 10px 0 rgba(0, 0, 0, .12),
                0 2px 4px -1px rgba(0, 0, 0, .2);
    color: rgba(0, 0, 0, .87);
    background-color: #BDBDBD;
}

.jupyter-button:focus {
    outline: 1px solid #64B5F6;
}

/* Button "Primary" Styling */

.jupyter-button.mod-primary {
    color: rgba(255, 255, 255, 1.0);
    background-color: #2196F3;
}

.jupyter-button.mod-primary.mod-active {
    color: rgba(255, 255, 255, 1);
    background-color: #1976D2;
}

.jupyter-button.mod-primary:active {
    color: rgba(255, 255, 255, 1);
    background-color: #1976D2;
}

/* Button "Success" Styling */

.jupyter-button.mod-success {
    color: rgba(255, 255, 255, 1.0);
    background-color: #4CAF50;
}

.jupyter-button.mod-success.mod-active {
    color: rgba(255, 255, 255, 1);
    background-color: #388E3C;
 }

.jupyter-button.mod-success:active {
    color: rgba(255, 255, 255, 1);
    background-color: #388E3C;
 }

/* Button "Info" Styling */

.jupyter-button.mod-info {
    color: rgba(255, 255, 255, 1.0);
    background-color: #00BCD4;
}

.jupyter-button.mod-info.mod-active {
    color: rgba(255, 255, 255, 1);
    background-color: #0097A7;
}

.jupyter-button.mod-info:active {
    color: rgba(255, 255, 255, 1);
    background-color: #0097A7;
}

/* Button "Warning" Styling */

.jupyter-button.mod-warning {
    color: rgba(255, 255, 255, 1.0);
    background-color: #FF9800;
}

.jupyter-button.mod-warning.mod-active {
    color: rgba(255, 255, 255, 1);
    background-color: #F57C00;
}

.jupyter-button.mod-warning:active {
    color: rgba(255, 255, 255, 1);
    background-color: #F57C00;
}

/* Button "Danger" Styling */

.jupyter-button.mod-danger {
    color: rgba(255, 255, 255, 1.0);
    background-color: #F44336;
}

.jupyter-button.mod-danger.mod-active {
    color: rgba(255, 255, 255, 1);
    background-color: #D32F2F;
}

.jupyter-button.mod-danger:active {
    color: rgba(255, 255, 255, 1);
    background-color: #D32F2F;
}

/* Widget Button*/

.widget-button, .widget-toggle-button {
    width: 148px;
}

/* Widget Label Styling */

.widget-label {
    /* Label */
    color: black;
    font-size: 13px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    line-height: 28px;
    max-width: 300px;
}

.jupyter-widgets.widget-label {
    width: 72px;
}

.widget-inline-hbox .widget-label {
    /* Horizontal Widget Label */
    color: black;
    text-align: right;
    margin-right: 4px;
    max-width: 148px;
    min-width: 80px;
    -ms-flex-negative: 0;
        flex-shrink: 0;
}

.widget-inline-vbox .widget-label {
    /* Vertical Widget Label */
    color: black;
    text-align: center;
}

/* Widget Readout Styling */

.widget-readout {
    color: black;
    font-size: 13px;
    height: 28px;
    line-height: 28px;
    margin-left: 4px;
    overflow: hidden;
    white-space: nowrap;
    text-align: center;
}

.widget-readout.overflow {
    /* Overflowing Readout */

    /* From Material Design Lite
        shadow-key-umbra-opacity: 0.2;
        shadow-key-penumbra-opacity: 0.14;
        shadow-ambient-shadow-opacity: 0.12;
     */

    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .2),
                0 3px 1px -2px rgba(0, 0, 0, .14),
                0 1px 5px 0 rgba(0, 0, 0, .12);
}

.widget-inline-hbox .widget-readout {
    /* Horizontal Readout */
    text-align: center;
    max-width: 148px;
    min-width: 72px;
    margin-left: 4px;
}

.widget-inline-vbox .widget-readout {
    /* Vertical Readout */
    margin-top: 4px;
}

/* Widget Checkbox Styling */

.widget-checkbox {
    width: 148px;
    height: 28px;
    line-height: 28px;
    -webkit-box-pack: justify;
        -ms-flex-pack: justify;
            justify-content: space-between;
}

.widget-checkbox input[type="checkbox"] {
    margin: 0px 4px 0px 4px;
    line-height: 28px;
    font-size: large;
    -webkit-box-flex: 1;
        -ms-flex-positive: 1;
            flex-grow: 1;
    -ms-flex-negative: 0;
        flex-shrink: 0;
    -ms-flex-item-align: center;
        -ms-grid-row-align: center;
        align-self: center;
}

/* Widget Valid Styling */

.widget-valid {
    height: 28px;
    line-height: 28px;
    width: 148px;
    font-size: 13px;
}

.widget-valid i:before {
    height: 28px;
    line-height: 28px;
    margin-right: 4px;
    margin-left: 4px;

    /* from the fa class in FontAwesome: https://github.com/FortAwesome/Font-Awesome/blob/49100c7c3a7b58d50baa71efef11af41a66b03d3/css/font-awesome.css#L14 */
    display: inline-block;
    font: normal normal normal 14px/1 FontAwesome;
    font-size: inherit;
    text-rendering: auto;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

.widget-valid.mod-valid i:before {
    content: "\F00C";
    color: green;
}

.widget-valid.mod-invalid i:before {
    content: "\F00D";
    color: red;
}

.widget-valid.mod-valid .widget-valid-readout {
    display: none;
}

/* Widget Text and TextArea Stying */

.widget-textarea, .widget-text {
    width: 300px;
}

.widget-text input[type="text"] {
    height: 28px;
    line-height: 28px;
}

.widget-text input[type="text"], .widget-textarea textarea {
    box-sizing: border-box;
    border: 1px solid #9E9E9E;
    background-color: white;
    color: rgba(0, 0, 0, .87);
    font-size: 13px;
    padding: 4px 8px;
    -webkit-box-flex: 1;
        -ms-flex-positive: 1;
            flex-grow: 1;
    min-width: 0; /* This makes it possible for the flexbox to shrink this input */
    -ms-flex-negative: 1;
        flex-shrink: 1;
    outline: none !important;
    line-height: 1.5;
}

.widget-textarea textarea {
    height: inherit;
    width: inherit;
}

.widget-text input:focus, .widget-textarea textarea:focus {
    border-color: #64B5F6;
}

/* Widget Slider */

.widget-slider .ui-slider {
    /* Slider Track */
    border: 1px solid #BDBDBD;
    background: #BDBDBD;
    box-sizing: border-box;
    position: relative;
    border-radius: 0px;
}

.widget-slider .ui-slider .ui-slider-handle {
    /* Slider Handle */
    outline: none !important; /* focused slider handles are colored - see below */
    position: absolute;
    background-color: white;
    border: 1px solid #9E9E9E;
    box-sizing: border-box;
    z-index: 1;
    background-image: none; /* Override jquery-ui */
}

/* Override jquery-ui */

.widget-slider .ui-slider .ui-slider-handle:hover, .widget-slider .ui-slider .ui-slider-handle:focus {
    background-color: #2196F3;
    border: 1px solid #2196F3;
}

.widget-slider .ui-slider .ui-slider-handle:active {
    background-color: #2196F3;
    border-color: #2196F3;
    z-index: 2;
    -webkit-transform: scale(1.2);
            transform: scale(1.2);
}

.widget-slider  .ui-slider .ui-slider-range {
    /* Interval between the two specified value of a double slider */
    position: absolute;
    background: #2196F3;
    z-index: 0;
}

/* Shapes of Slider Handles */

.widget-hslider .ui-slider .ui-slider-handle {
    width: 16px;
    height: 16px;
    margin-top: -7px;
    margin-left: -7px;
    border-radius: 50%;
    top: 0;
}

.widget-vslider .ui-slider .ui-slider-handle {
    width: 16px;
    height: 16px;
    margin-bottom: -7px;
    margin-left: -7px;
    border-radius: 50%;
    left: 0;
}

.widget-hslider .ui-slider .ui-slider-range {
    height: 8px;
    margin-top: -3px;
}

.widget-vslider .ui-slider .ui-slider-range {
    width: 8px;
    margin-left: -3px;
}

/* Horizontal Slider */

.widget-hslider {
    width: 300px;
    height: 28px;
    line-height: 28px;
}

.widgets-slider .slider-container {
    overflow: visible;
}

.widget-hslider .slider-container {
    height: 28px;
    margin-left: 6px;
    margin-right: 6px;
    -ms-flex-item-align: stretch;
        -ms-grid-row-align: stretch;
        align-self: stretch;
    -webkit-box-flex: 1;
        -ms-flex: 1 1 148px;
            flex: 1 1 148px;
}

.widget-hslider .ui-slider {
    /* Inner, invisible slide div */
    height: 4px;
    margin-top: 12px;
    width: 100%;
}

/* Vertical Slider */

.widget-vbox .widget-label {
    height: 28px;
    line-height: 28px;
}

.widget-vslider {
    /* Vertical Slider */
    height: 200px;
    width: 72px;
}

.widget-vslider .slider-container {
    -webkit-box-flex: 1;
        -ms-flex: 1 1 148px;
            flex: 1 1 148px;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 6px;
    margin-top: 6px;
}

.widget-vslider .ui-slider {
    /* Inner, invisible slide div */
    width: 4px;
    height: 100%;
    margin-left: auto;
    margin-right: auto;
}

/* Widget Progress Styling */

.progress-bar {
    -webkit-transition: none;
    transition: none;
}

.progress-bar {
    height: 28px;
}

.progress-bar {
    background-color: #2196F3;
}

.progress-bar-success {
    background-color: #4CAF50;
}

.progress-bar-info {
    background-color: #00BCD4;
}

.progress-bar-warning {
    background-color: #FF9800;
}

.progress-bar-danger {
    background-color: #F44336;
}

.progress {
    background-color: #EEEEEE;
    border: none;
    box-shadow: none;
}

/* Horisontal Progress */

.widget-hprogress {
    /* Progress Bar */
    height: 28px;
    line-height: 28px;
    width: 300px;
}

.widget-hprogress .progress {
    -webkit-box-flex: 1;
        -ms-flex-positive: 1;
            flex-grow: 1;
    height: 20px;
    margin-top: auto;
    margin-bottom: auto;
}

/* Vertical Progress */

.widget-vprogress {
    height: 200px;
    width: 72px;
}

.widget-vprogress .progress {
    -webkit-box-flex: 1;
        -ms-flex-positive: 1;
            flex-grow: 1;
    width: 20px;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 0;
}

/* Select Widget Styling */

.widget-select {
    width: 300px;
    height: 28px;
    line-height: 28px;
}

.widget-select select {
    border: 1px solid #9E9E9E;
    border-radius: 0;
    height: 28px;
    -webkit-box-flex: 1;
        -ms-flex: 1 1 148px;
            flex: 1 1 148px;
    min-width: 0; /* This makes it possible for the flexbox to shrink this input */
    box-sizing: border-box;
    outline: none !important;
    box-shadow: none;
    background-color: white;
    color: rgba(0, 0, 0, .87);
    font-size: 13px;
    vertical-align: top;
    padding-left: 8px;
	appearance: none;
	-webkit-appearance: none;
	-moz-appearance: none;
    background-repeat: no-repeat;
	background-size: 20px;
	background-position: right center;
    background-image: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxOCAxOCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTggMTg7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDpub25lO30KPC9zdHlsZT4KPHBhdGggZD0iTTUuMiw1LjlMOSw5LjdsMy44LTMuOGwxLjIsMS4ybC00LjksNWwtNC45LTVMNS4yLDUuOXoiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTAtMC42aDE4djE4SDBWLTAuNnoiLz4KPC9zdmc+Cg");
}

.widget-select select:focus {
    border-color: #64B5F6;
}

/* To disable the dotted border in Firefox around select controls.
   See http://stackoverflow.com/a/18853002 */

.widget-select select:-moz-focusring {
    color: transparent;
    text-shadow: 0 0 0 #000;
}

.widget-select select option:checked {
    color: rgba(0, 0, 0, 1.0);
    background: white repeat url("data:image/gif;base64,R0lGO...");
}

/* Select Multiple */

.widget-select-multiple {
    width: 300px;
    line-height: 28px;
}

.widget-select-multiple select {
    border: 1px solid #9E9E9E;
    background-color: white;
    color: rgba(0, 0, 0, .87);
    font-size: 13px;
    -webkit-box-flex: 1;
        -ms-flex: 1 1 148px;
            flex: 1 1 148px;
    outline: none !important;
    overflow: auto;
}

.widget-select-multiple select:focus {
    border-color: #64B5F6;
}

.widget-select-multiple select option:checked {
    color: rgba(0, 0, 0, 1.0);
    background: white repeat url("data:image/gif;base64,R0lGO...");
}

.wiget-select-multiple select option {
    padding-left: 4px;
    line-height: 28px;
    /* line-height doesn't work on some browsers for select options */
    padding-top: 21.5px;
    padding-bottom: 21.5px;
}

/* Toggle Buttons Styling */

.widget-toggle-buttons {
    line-height: 28px;
}

.widget-toggle-buttons .widget-toggle-button {
    margin-left: 2px;
    margin-right: 2px;
}

/* Radio Buttons Styling */

.widget-radio {
    width: 300px;
    line-height: 28px;
}

.widget-radio-box {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
        -ms-flex-direction: column;
            flex-direction: column;
    -webkit-box-align: stretch;
        -ms-flex-align: stretch;
            align-items: stretch;
    box-sizing: border-box;
    -webkit-box-flex: 1;
        -ms-flex-positive: 1;
            flex-grow: 1;
}

.widget-radio-box label {
    height: 28px;
    line-height: 28px;
    font-size: 13px;
}

.widget-radio-box input {
    height: 28px;
    line-height: 28px;
    margin: 0 4px 0 4px;
    float: left;
}

/* Color Picker Styling */

.widget-colorpicker {
    width: 300px;
    height: 28px;
    line-height: 28px;
}

.widget-colorpicker > .widget-colorpicker-input {
    -webkit-box-flex: 1;
        -ms-flex-positive: 1;
            flex-grow: 1;
    -ms-flex-negative: 1;
        flex-shrink: 1;
    min-width: 72px;
}

.widget-colorpicker input[type="color"] {
    width: 28px;
    height: 28px;
    padding: 0 2px; /* make the color square actually square on Chrome on OS X */
    background: white;
    color: rgba(0, 0, 0, .87);
    border: 1px solid #9E9E9E;
    border-left: none;
    -webkit-box-flex: 0;
        -ms-flex-positive: 0;
            flex-grow: 0;
    -ms-flex-negative: 0;
        flex-shrink: 0;
    box-sizing: border-box;
    -ms-flex-item-align: stretch;
        -ms-grid-row-align: stretch;
        align-self: stretch;
    outline: none !important;
}

.widget-colorpicker.concise input[type="color"] {
    border-left: 1px solid #9E9E9E;
}

.widget-colorpicker input[type="color"]:focus, .widget-colorpicker input[type="text"]:focus {
    border-color: #64B5F6;
}

.widget-colorpicker input[type="text"] {
    -webkit-box-flex: 1;
        -ms-flex-positive: 1;
            flex-grow: 1;
    outline: none !important;
    height: 28px;
    line-height: 28px;
    background: white;
    color: rgba(0, 0, 0, .87);
    border: 1px solid #9E9E9E;
    font-size: 13px;
    padding: 4px 8px;
    min-width: 0; /* This makes it possible for the flexbox to shrink this input */
    -ms-flex-negative: 1;
        flex-shrink: 1;
    box-sizing: border-box;
}

/* Date Picker Styling */

.widget-datepicker {
    width: 300px;
    height: 28px;
    line-height: 28px;
}

.widget-datepicker input[type="date"] {
    -webkit-box-flex: 1;
        -ms-flex-positive: 1;
            flex-grow: 1;
    -ms-flex-negative: 1;
        flex-shrink: 1;
    min-width: 0; /* This makes it possible for the flexbox to shrink this input */
    outline: none !important;
    height: 28px;
    border: 1px solid #9E9E9E;
    background-color: white;
    color: rgba(0, 0, 0, .87);
    font-size: 13px;
    padding: 4px 8px;
    box-sizing: border-box;
}

.widget-datepicker input[type="date"]:focus {
    border-color: #64B5F6;
}

/* Play Widget */

.widget-play {
    min-width: 148px;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-pack: justify;
        -ms-flex-pack: justify;
            justify-content: space-between;
}

.widget-play .jupyter-button {
    min-width: 45.33333px;
    text-align: center;
}

/* Tab Widget */

.jupyter-widgets .p-TabBar {
    overflow-x: visible;
    overflow-y: visible;
}

.jupyter-widgets.widget-tab .p-TabBar.p-mod-horizontal > .p-TabBar-content {
    -webkit-box-align: end;
        -ms-flex-align: end;
            align-items: flex-end;
    margin-bottom: 0;
}

.jupyter-widgets.widget-tab .widget-tab-contents {
    width: 100%;
    box-sizing: border-box;
    margin: 0;
    background: white;
    color: rgba(0, 0, 0, .87);
    border: 1px solid #9E9E9E;
    padding: 15px;
}

.jupyter-widgets.widget-tab .widget-tab-contents .widget-tab-child.p-mod-hidden {
    display: none !important;
}

.jupyter-widgets.widget-tab .widget-tab-bar.p-TabBar {
    font: 13px Helvetica, Arial, sans-serif;
}

.jupyter-widgets.widget-tab .p-TabBar-tab {
    -webkit-box-flex: 0;
        -ms-flex: 0 1 144px;
            flex: 0 1 144px;
    min-width: 35px;
    min-height: 25px;
    line-height: 24px;
    margin-left: -1px;
    padding: 0px 10px;
    background: #EEEEEE;
    color: rgba(0, 0, 0, .54);
    border: 1px solid #9E9E9E;
    border-bottom: none;
    position: relative;
}

.jupyter-widgets.widget-tab .p-TabBar-tab.p-mod-current {
    color: rgba(0, 0, 0, 1.0);
    /* We want the background to match the tab content background */
    background: white;
    min-height: 26px;
    -webkit-transform: translateY(1px);
            transform: translateY(1px);
}

.jupyter-widgets.widget-tab .p-TabBar-tab.p-mod-current:before {
    position: absolute;
    top: -1px;
    left: -1px;
    content: '';
    height: 2px;
    width: calc(100% + 2 * 1px);
    background: #2196F3;
}

.jupyter-widgets.widget-tab .p-TabBar-tab:first-child {
    margin-left: 0;
}

.jupyter-widgets.widget-tab .p-TabBar-tab:hover:not(.p-mod-current) {
    background: white;
    color: rgba(0, 0, 0, .87);
}

.jupyter-widgets.widget-tab.p-mod-closable > .p-TabBar-tabCloseIcon {
    margin-left: 4px;
}

.jupyter-widgets.widget-tab.p-mod-closable > .p-TabBar-tabCloseIcon:before {
    font-family: FontAwesome;
    content: '\F00D'; /* close */
}

.jupyter-widgets.widget-tab .p-TabBar-tabIcon,
.jupyter-widgets.widget-tab .p-TabBar-tabLabel,
.jupyter-widgets.widget-tab .p-TabBar-tabCloseIcon {
    line-height: 24px;
}

/* Accordion Widget */

.p-Collapse {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
        -ms-flex-direction: column;
            flex-direction: column;
    -webkit-box-align: stretch;
        -ms-flex-align: stretch;
            align-items: stretch;
}

.p-Collapse-header {
    padding: 4px;
    cursor: pointer;
    color: rgba(0, 0, 0, .54);
    background-color: #EEEEEE;
    border: 1px solid #9E9E9E;
    padding: 10px 15px;
    font-weight: bold;
}

.p-Collapse-header:hover {
    background-color: white;
    color: rgba(0, 0, 0, .87);
}

.p-Collapse-open .p-Collapse-header {
    background-color: white;
    color: rgba(0, 0, 0, 1.0);
    cursor: default;
    border-bottom: none;
}

.p-Collapse .p-Collapse-header::before {
    content: '\F0DA\A0';  /* caret-right, non-breaking space */
    display: inline-block;
    font: normal normal normal 14px/1 FontAwesome;
    font-size: inherit;
    text-rendering: auto;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

.p-Collapse-open .p-Collapse-header::before {
    content: '\F0D7\A0'; /* caret-down, non-breaking space */
}

.p-Collapse-contents {
    padding: 15px;
    background-color: white;
    color: rgba(0, 0, 0, .87);
    border-left: 1px solid #9E9E9E;
    border-right: 1px solid #9E9E9E;
    border-bottom: 1px solid #9E9E9E;
}

.p-Accordion {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
        -ms-flex-direction: column;
            flex-direction: column;
    -webkit-box-align: stretch;
        -ms-flex-align: stretch;
            align-items: stretch;
}

.p-Accordion .p-Collapse {
    margin-bottom: 0;
}

.p-Accordion .p-Collapse + .p-Collapse {
    margin-top: 4px;
}

/* HTML widget */

.widget-html, .widget-htmlmath {
    font-size: 13px;
}
</style><link id="favicon" type="image/x-icon" rel="shortcut icon" href="http://localhost:8888/static/base/images/favicon.ico"></head><style id="stylish-1" class="stylish" type="text/css">html, body {background-color: #CCE8CC!important; }</style>

<body class="notebook_app command_mode" data-jupyter-api-token="ea316668f703f0a994afad541ea89c16c133ddad432673da" data-base-url="/" data-ws-url="" data-notebook-name="machine_translation.ipynb" data-notebook-path="machine_translation.ipynb" dir="ltr" style=""><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>

<noscript>
    &lt;div id='noscript'&gt;
      Jupyter Notebook requires JavaScript.&lt;br&gt;
      Please enable it to proceed.
  &lt;/div&gt;
</noscript>

<div id="header" style="display: block;">
  <div id="header-container" class="container">
  <div id="ipython_notebook" class="nav navbar-brand pull-left"><a href="http://localhost:8888/tree" title="dashboard"><img src="./machine_translation_files/logo.png" alt="Jupyter Notebook"></a></div>

  
  
  

    <span id="login_widget">
      
        <button id="logout" class="btn btn-sm navbar-btn">Logout</button>
      
    </span>

  

  

  


<span id="save_widget" class="pull-left save_widget">
    <span id="notebook_name" class="filename">machine_translation</span>
    <span class="checkpoint_status" title="Tue, Aug 22, 2017 7:32 PM">Last Checkpoint: a few seconds ago</span>
    <span class="autosave_status">(autosaved)</span>
</span>

<span id="kernel_logo_widget">
  
  <img class="current_kernel_logo" src="./machine_translation_files/logo-64x64.png" title="Python (tensorflowenv)" style="display: inline;">
  
</span>


  </div>
  <div class="header-bar"></div>

  
<div id="menubar-container" class="container">
<div id="menubar">
    <div id="menus" class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <button type="button" class="btn btn-default navbar-btn navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <i class="fa fa-bars"></i>
              <span class="navbar-text">Menu</span>
            </button>
            <p id="kernel_indicator" class="navbar-text indicator_area">
              <span class="kernel_indicator_name">Python (tensorflowenv)</span>
              <i id="kernel_indicator_icon" class="kernel_idle_icon" title="Kernel Idle"></i>
            </p>
            <i id="readonly-indicator" class="navbar-text" title="This notebook is read-only" style="display: none;">
                <span class="fa-stack">
                    <i class="fa fa-save fa-stack-1x"></i>
                    <i class="fa fa-ban fa-stack-2x text-danger"></i>
                </span>
            </i>
            <i id="modal_indicator" class="navbar-text modal_indicator" title="Command Mode"></i>
            <span id="notification_area"><div id="notification_kernel" class="notification_widget btn btn-xs navbar-btn undefined info" style="display: none;"><span></span></div><div id="notification_notebook" class="notification_widget btn btn-xs navbar-btn" style="display: none;"><span></span></div><div id="notification_trusted" class="notification_widget btn btn-xs navbar-btn" style="display: inline-block;"><span>Trusted</span></div><div id="notification_widgets" class="notification_widget btn btn-xs navbar-btn" style="display: none;"><span></span></div></span>
            <div class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
                <li class="dropdown"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#" class="dropdown-toggle" data-toggle="dropdown">File</a>
                    <ul id="file_menu" class="dropdown-menu">
                        <li id="new_notebook" class="dropdown-submenu">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">New Notebook</a>
                            <ul class="dropdown-menu" id="menu-new-notebook-submenu"><li id="new-notebook-submenu-tensorflowenv"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Python (tensorflowenv)</a></li><li class="divider"></li><li id="new-notebook-submenu-py36"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Python (py36)</a></li><li id="new-notebook-submenu-python3"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Python 3</a></li></ul>
                        </li>
                        <li id="open_notebook" title="Opens a new window with the Dashboard view">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Open...</a></li>
                        <!-- <hr/> -->
                        <li class="divider"></li>
                        <li id="copy_notebook" title="Open a copy of this notebook&#39;s contents and start a new kernel">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Make a Copy...</a></li>
                        <li id="rename_notebook"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Rename...</a></li>
                        <li id="save_checkpoint"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Save and Checkpoint</a></li><li id="save_html_with_toc"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Save as HTML (with toc)</a></li>
                        <!-- <hr/> -->
                        <li class="divider"></li>
                        <li id="restore_checkpoint" class="dropdown-submenu"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Revert to Checkpoint</a>
                          <ul class="dropdown-menu"><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Tuesday, August 22, 2017 7:32 PM</a></li></ul>
                        </li>
                        <li class="divider"></li>
                        <li id="print_preview"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Print Preview</a></li>
                        <li class="dropdown-submenu"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Download as</a>
                            <ul id="download_menu" class="dropdown-menu">
                                <li id="download_ipynb"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Notebook (.ipynb)</a></li>
                                <li id="download_script"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Python (.py)</a></li>
                                <li id="download_html"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">HTML (.html)</a></li>
                                <li id="download_markdown"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Markdown (.md)</a></li>
                                <li id="download_rst"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">reST (.rst)</a></li>
                                <li id="download_latex"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">LaTeX (.tex)</a></li>
                                <li id="download_pdf"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">PDF via LaTeX (.pdf)</a></li>
                            </ul>
                        </li>
                        <li class="dropdown-submenu hidden"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Deploy as</a>
                            <ul id="deploy_menu" class="dropdown-menu"></ul>
                        </li>
                        <li class="divider"></li>
                        <li id="trust_notebook" title="Trust the output of this notebook" class="disabled">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Trusted Notebook</a></li>
                        <li class="divider"></li>
                        <li id="kill_and_exit" title="Shutdown this notebook&#39;s kernel, and close this window">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Close and Halt</a></li>
                    </ul>
                </li>
                <li class="dropdown"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#" class="dropdown-toggle" data-toggle="dropdown">Edit</a>
                    <ul id="edit_menu" class="dropdown-menu">
                        <li id="cut_cell"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Cut Cells</a></li>
                        <li id="copy_cell"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Copy Cells</a></li>
                        <li id="paste_cell_above" class="disabled"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Paste Cells Above</a></li>
                        <li id="paste_cell_below" class="disabled"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Paste Cells Below</a></li>
                        <li id="paste_cell_replace" class="disabled"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Paste Cells &amp; Replace</a></li>
                        <li id="delete_cell"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Delete Cells</a></li>
                        <li id="undelete_cell" class=""><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Undo Delete Cells</a></li>
                        <li class="divider"></li>
                        <li id="split_cell"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Split Cell</a></li>
                        <li id="merge_cell_above"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Merge Cell Above</a></li>
                        <li id="merge_cell_below"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Merge Cell Below</a></li>
                        <li class="divider"></li>
                        <li id="move_cell_up"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Move Cell Up</a></li>
                        <li id="move_cell_down"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Move Cell Down</a></li>
                        <li class="divider"></li>
                        <li id="edit_nb_metadata"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Edit Notebook Metadata</a></li>
                        <li class="divider"></li>
                        <li id="find_and_replace"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#"> Find and Replace </a></li>
                        <li class="divider"></li>
                        <li id="cut_cell_attachments"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Cut Cell Attachments</a></li>
                        <li id="copy_cell_attachments"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Copy Cell Attachments</a></li>
                        <li id="paste_cell_attachments" class="disabled"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Paste Cell Attachments</a></li>
                        <li class="divider"></li>
                        <li id="insert_image" class="disabled"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#"> Insert Image </a></li>
                    <li class="divider"></li><li><a target="_blank" title="Opens in a new window" href="http://localhost:8888/nbextensions/"> <i class="fa fa-cogs menu-icon pull-right"></i><span>nbextensions config</span></a></li></ul>
                </li>
                <li class="dropdown"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#" class="dropdown-toggle" data-toggle="dropdown">View</a>
                    <ul id="view_menu" class="dropdown-menu">
                        <li id="toggle_header" title="Show/Hide the logo and notebook title (above menu bar)">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Toggle Header</a>
                        </li>
                        <li id="toggle_toolbar" title="Show/Hide the action icons (below menu bar)">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Toggle Toolbar</a>
                        </li>
                        <li id="toggle_line_numbers" title="Show/Hide line numbers in cells">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Toggle Line Numbers</a>
                        </li>
                        <li id="menu-cell-toolbar" class="dropdown-submenu">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Cell Toolbar</a>
                            <ul class="dropdown-menu" id="menu-cell-toolbar-submenu"><li data-name="None"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">None</a></li><li data-name="Edit%20Metadata"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Edit Metadata</a></li><li data-name="Raw%20Cell%20Format"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Raw Cell Format</a></li><li data-name="Slideshow"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Slideshow</a></li><li data-name="Attachments"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Attachments</a></li><li data-name="Tags"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Tags</a></li></ul>
                        </li>
                    </ul>
                </li>
                <li class="dropdown"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#" class="dropdown-toggle" data-toggle="dropdown">Insert</a>
                    <ul id="insert_menu" class="dropdown-menu">
                        <li id="insert_cell_above" title="Insert an empty Code cell above the currently active cell">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Insert Cell Above</a></li>
                        <li id="insert_cell_below" title="Insert an empty Code cell below the currently active cell">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Insert Cell Below</a></li>
                    </ul>
                </li>
                <li class="dropdown"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#" class="dropdown-toggle" data-toggle="dropdown">Cell</a>
                    <ul id="cell_menu" class="dropdown-menu">
                        <li id="run_cell" title="Run this cell, and move cursor to the next one">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Run Cells</a></li>
                        <li id="run_cell_select_below" title="Run this cell, select below">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Run Cells and Select Below</a></li>
                        <li id="run_cell_insert_below" title="Run this cell, insert below">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Run Cells and Insert Below</a></li>
                        <li id="run_all_cells" title="Run all cells in the notebook">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Run All</a></li>
                        <li id="run_all_cells_above" title="Run all cells above (but not including) this cell">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Run All Above</a></li>
                        <li id="run_all_cells_below" title="Run this cell and all cells below it">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Run All Below</a></li>
                        <li class="divider"></li>
                        <li id="change_cell_type" class="dropdown-submenu" title="All cells in the notebook have a cell type. By default, new cells are created as &#39;Code&#39; cells">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Cell Type</a>
                            <ul class="dropdown-menu">
                              <li id="to_code" title="Contents will be sent to the kernel for execution, and output will display in the footer of cell">
                                  <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Code</a></li>
                              <li id="to_markdown" title="Contents will be rendered as HTML and serve as explanatory text">
                                  <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Markdown</a></li>
                              <li id="to_raw" title="Contents will pass through nbconvert unmodified">
                                  <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Raw NBConvert</a></li>
                            </ul>
                        </li>
                        <li class="divider"></li>
                        <li id="current_outputs" class="dropdown-submenu"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Current Outputs</a>
                            <ul class="dropdown-menu">
                                <li id="toggle_current_output" title="Hide/Show the output of the current cell">
                                    <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Toggle</a>
                                </li>
                                <li id="toggle_current_output_scroll" title="Scroll the output of the current cell">
                                    <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Toggle Scrolling</a>
                                </li>
                                <li id="clear_current_output" title="Clear the output of the current cell">
                                    <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Clear</a>
                                </li>
                            </ul>
                        </li>
                        <li id="all_outputs" class="dropdown-submenu"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">All Output</a>
                            <ul class="dropdown-menu">
                                <li id="toggle_all_output" title="Hide/Show the output of all cells">
                                    <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Toggle</a>
                                </li>
                                <li id="toggle_all_output_scroll" title="Scroll the output of all cells">
                                    <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Toggle Scrolling</a>
                                </li>
                                <li id="clear_all_output" title="Clear the output of all cells">
                                    <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Clear</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="dropdown"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#" class="dropdown-toggle" data-toggle="dropdown">Kernel</a>
                    <ul id="kernel_menu" class="dropdown-menu">
                        <li id="int_kernel" title="Send KeyboardInterrupt (CTRL-C) to the Kernel">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Interrupt</a>
                        </li>
                        <li id="restart_kernel" title="Restart the Kernel">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Restart</a>
                        </li>
                        <li id="restart_clear_output" title="Restart the Kernel and clear all output">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Restart &amp; Clear Output</a>
                        </li>
                        <li id="restart_run_all" title="Restart the Kernel and re-run the notebook">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Restart &amp; Run All</a>
                        </li>
                        <li id="reconnect_kernel" title="Reconnect to the Kernel">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Reconnect</a>
                        </li>
                        <li id="shutdown_kernel" title="Shutdown the Kernel">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Shutdown</a>
                        </li>
                        <li class="divider"></li>
                        <li id="menu-change-kernel" class="dropdown-submenu">
                            <a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Change kernel</a>
                            <ul class="dropdown-menu" id="menu-change-kernel-submenu"><li id="kernel-submenu-py36"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Python (py36)</a></li><li id="kernel-submenu-tensorflowenv"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Python (tensorflowenv)</a></li><li id="kernel-submenu-python3"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Python 3</a></li></ul>
                        </li>
                    </ul>
                </li><li id="Navigate" class="dropdown"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#" id="Navigate_sub" class="dropdown-toggle" data-toggle="dropdown">Navigate</a><ul id="Navigate_menu" class="dropdown-menu ui-resizable" style="height: 383px; width: 252px;"><div id="navigate_menu" class="toc" style="width: 252px; height: 371px;"><ul class="toc-item" id="navigate_menu-level0"><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Artificial-Intelligence-Nanodegree-1"><span class="toc-item-num">1&nbsp;&nbsp;</span>Artificial Intelligence Nanodegree</a><ul class="toc-item"><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Machine-Translation-Project-11"><span class="toc-item-num">1.1&nbsp;&nbsp;</span>Machine Translation Project</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Introduction-12"><span class="toc-item-num">1.2&nbsp;&nbsp;</span>Introduction</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Dataset-13"><span class="toc-item-num">1.3&nbsp;&nbsp;</span>Dataset</a><ul class="toc-item"><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Load-Data-131"><span class="toc-item-num">1.3.1&nbsp;&nbsp;</span>Load Data</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Files-132"><span class="toc-item-num">1.3.2&nbsp;&nbsp;</span>Files</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Vocabulary-133"><span class="toc-item-num">1.3.3&nbsp;&nbsp;</span>Vocabulary</a></li></ul></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Preprocess-14"><span class="toc-item-num">1.4&nbsp;&nbsp;</span>Preprocess</a><ul class="toc-item"><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Tokenize-(IMPLEMENTATION)-141"><span class="toc-item-num">1.4.1&nbsp;&nbsp;</span>Tokenize (IMPLEMENTATION)</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Padding-(IMPLEMENTATION)-142"><span class="toc-item-num">1.4.2&nbsp;&nbsp;</span>Padding (IMPLEMENTATION)</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Preprocess-Pipeline-143"><span class="toc-item-num">1.4.3&nbsp;&nbsp;</span>Preprocess Pipeline</a></li></ul></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Models-15"><span class="toc-item-num">1.5&nbsp;&nbsp;</span>Models</a><ul class="toc-item"><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Ids-Back-to-Text-151"><span class="toc-item-num">1.5.1&nbsp;&nbsp;</span>Ids Back to Text</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Model-1:-RNN-(IMPLEMENTATION)-152"><span class="toc-item-num">1.5.2&nbsp;&nbsp;</span>Model 1: RNN (IMPLEMENTATION)</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Model-2:-Embedding-(IMPLEMENTATION)-153"><span class="toc-item-num">1.5.3&nbsp;&nbsp;</span>Model 2: Embedding (IMPLEMENTATION)</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Model-3:-Bidirectional-RNNs-(IMPLEMENTATION)-154"><span class="toc-item-num">1.5.4&nbsp;&nbsp;</span>Model 3: Bidirectional RNNs (IMPLEMENTATION)</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Model-4:-Encoder-Decoder-(OPTIONAL)-155"><span class="toc-item-num">1.5.5&nbsp;&nbsp;</span>Model 4: Encoder-Decoder (OPTIONAL)</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Model-5:-Custom-(IMPLEMENTATION)-156"><span class="toc-item-num">1.5.6&nbsp;&nbsp;</span>Model 5: Custom (IMPLEMENTATION)</a></li></ul></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Prediction-(IMPLEMENTATION)-16"><span class="toc-item-num">1.6&nbsp;&nbsp;</span>Prediction (IMPLEMENTATION)</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Submission-17"><span class="toc-item-num">1.7&nbsp;&nbsp;</span>Submission</a></li></ul></li></ul></div><div class="ui-resizable-handle ui-resizable-e" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-s" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90;"></div></ul></li>
                <li class="dropdown"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#" data-toggle="dropdown" class="dropdown-toggle">Widgets</a><ul id="widget-submenu" class="dropdown-menu"><li title="Save the notebook with the widget state information for static rendering"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Save Notebook with Widgets</a></li><li title="Download the widget state as a JSON file"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Download Widget State</a></li><li title="Embed interactive widgets"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Embed Widgets</a></li></ul></li><li class="dropdown"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#" class="dropdown-toggle" data-toggle="dropdown">Help</a>
                    <ul id="help_menu" class="dropdown-menu">
                        
                        <li id="notebook_tour" title="A quick tour of the notebook user interface"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">User Interface Tour</a></li>
                        <li id="keyboard_shortcuts" title="Opens a dialog which shows all keyboard shortcuts"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Keyboard Shortcuts</a></li>
                        <li id="edit_keyboard_shortcuts" title="Opens a dialog allowing you to edit Keyboard shortcuts"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#">Edit Keyboard Shortcuts</a></li>
                        <li class="divider"></li>
                        

                        
                            
                                <li><a rel="noreferrer" href="http://nbviewer.ipython.org/github/ipython/ipython/blob/3.x/examples/Notebook/Index.ipynb" target="_blank" title="Opens in a new window">
                                
                                    <i class="fa fa-external-link menu-icon pull-right"></i>
                                

                                Notebook Help
                                </a></li>
                            
                                <li><a rel="noreferrer" href="https://help.github.com/articles/markdown-basics/" target="_blank" title="Opens in a new window">
                                
                                    <i class="fa fa-external-link menu-icon pull-right"></i>
                                

                                Markdown
                                </a></li>
                            
                            
                        
                        <li><a title="Jupyter_contrib_nbextensions documentation" id="jupyter_contrib_nbextensions_help" href="http://jupyter-contrib-nbextensions.readthedocs.io/en/latest/" target="_blank">Jupyter-contrib <br> nbextensions<i class="fa fa-external-link menu-icon pull-right"></i></a></li><li id="kernel-help-links" class="divider"></li><li><a target="_blank" title="Opens in a new window" href="http://docs.python.org/3.5?v=20170822180050"><i class="fa fa-external-link menu-icon pull-right"></i><span>Python</span></a></li><li><a target="_blank" title="Opens in a new window" href="http://ipython.org/documentation.html?v=20170822180050"><i class="fa fa-external-link menu-icon pull-right"></i><span>IPython</span></a></li><li><a target="_blank" title="Opens in a new window" href="http://docs.scipy.org/doc/numpy/reference/?v=20170822180050"><i class="fa fa-external-link menu-icon pull-right"></i><span>NumPy</span></a></li><li><a target="_blank" title="Opens in a new window" href="http://docs.scipy.org/doc/scipy/reference/?v=20170822180050"><i class="fa fa-external-link menu-icon pull-right"></i><span>SciPy</span></a></li><li><a target="_blank" title="Opens in a new window" href="http://matplotlib.org/contents.html?v=20170822180050"><i class="fa fa-external-link menu-icon pull-right"></i><span>Matplotlib</span></a></li><li><a target="_blank" title="Opens in a new window" href="http://docs.sympy.org/latest/index.html?v=20170822180050"><i class="fa fa-external-link menu-icon pull-right"></i><span>SymPy</span></a></li><li><a target="_blank" title="Opens in a new window" href="http://pandas.pydata.org/pandas-docs/stable/?v=20170822180050"><i class="fa fa-external-link menu-icon pull-right"></i><span>pandas</span></a></li><li class="divider"></li>
                        <li title="About Jupyter Notebook"><a id="notebook_about" href="http://localhost:8888/notebooks/machine_translation.ipynb#">About</a></li>
                        
                    </ul>
                </li>
              </ul>
            </div>
        </div>
    </div>
</div>

<div id="maintoolbar" class="navbar">
  <div class="toolbar-inner navbar-inner navbar-nobg">
    <div id="maintoolbar-container" class="container toolbar"><div class="btn-group" id="save-notbook"><button class="btn btn-default" title="Save and Checkpoint" data-jupyter-action="jupyter-notebook:save-notebook"><i class="fa-save fa"></i></button></div><div class="btn-group" id="insert_above_below"><button class="btn btn-default" title="insert cell below" data-jupyter-action="jupyter-notebook:insert-cell-below"><i class="fa-plus fa"></i></button></div><div class="btn-group" id="cut_copy_paste"><button class="btn btn-default" title="cut selected cells" data-jupyter-action="jupyter-notebook:cut-cell"><i class="fa-cut fa"></i></button><button class="btn btn-default" title="copy selected cells" data-jupyter-action="jupyter-notebook:copy-cell"><i class="fa-copy fa"></i></button><button class="btn btn-default" title="paste cells below" data-jupyter-action="jupyter-notebook:paste-cell-below"><i class="fa-paste fa"></i></button></div><div class="btn-group" id="move_up_down"><button class="btn btn-default" title="move selected cells up" data-jupyter-action="jupyter-notebook:move-cell-up"><i class="fa-arrow-up fa"></i></button><button class="btn btn-default" title="move selected cells down" data-jupyter-action="jupyter-notebook:move-cell-down"><i class="fa-arrow-down fa"></i></button></div><div class="btn-group" id="run_int"><button class="btn btn-default" title="run cell, select below" data-jupyter-action="jupyter-notebook:run-cell-and-select-next"><i class="fa-step-forward fa"></i></button><button class="btn btn-default" title="interrupt kernel" data-jupyter-action="jupyter-notebook:interrupt-kernel"><i class="fa-stop fa"></i></button><button class="btn btn-default" title="restart the kernel (with dialog)" data-jupyter-action="jupyter-notebook:confirm-restart-kernel"><i class="fa-repeat fa"></i></button></div><select id="cell_type" class="form-control select-xs"><option value="code">Code</option><option value="markdown">Markdown</option><option value="raw">Raw NBConvert</option><option value="heading">Heading</option><option value="multiselect" disabled="disabled" style="display: none;">-</option></select><div class="btn-group"><button class="btn btn-default" title="open the command palette" data-jupyter-action="jupyter-notebook:show-command-palette"><i class="fa-keyboard-o fa"></i></button></div><div class="btn-group"><button class="btn btn-default" title="Table of Contents" id="toc_button"><i class="fa-list fa"></i></button></div></div>
  </div>
</div>
</div>

<div class="lower-header-bar"></div>

</div>

<div id="site" style="height: 512px; display: block;">


<div id="ipython-main-app">
    <div id="notebook_panel">
        <div id="notebook" tabindex="-1"><div class="container" id="notebook-container" style="width: 82%; margin-left: auto;"><div class="cell text_cell rendered unselected" tabindex="2"><div class="prompt input_prompt"></div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; padding-right: 0px; padding-bottom: 0px; margin-bottom: -11px; border-right-width: 19px; min-height: 407px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 20.6667px;">&nbsp;</div></div><div class="CodeMirror-code" style=""><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-1"># Artificial Intelligence Nanodegree</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-2">## Machine Translation Project</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">In this notebook, sections that end with <span class="cm-strong">**'(IMPLEMENTATION)'**</span> in the header indicate that the following blocks of code will require additional functionality which you must provide. Please be sure to read the instructions carefully!</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-2">## Introduction</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">In this notebook, you will build a deep neural network that functions as part of an end-to-end machine translation pipeline. Your completed pipeline will accept English text as input and return the French translation.</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable-2">- </span><span class="cm-strong cm-variable-2">**Preprocess**</span><span class="cm-variable-2"> - You'll convert text to sequence of integers.</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable-2">- </span><span class="cm-strong cm-variable-2">**Models**</span><span class="cm-variable-2"> Create models which accepts a sequence of integers as input and returns a probability distribution over possible translations. After learning about the basic types of neural networks that are often used for machine translation, you will engage in your own investigations, to design your own model!</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable-2">- </span><span class="cm-strong cm-variable-2">**Prediction**</span><span class="cm-variable-2"> Run the model on English text.</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-2">## Dataset</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">We begin by investigating the dataset that will be used to train and evaluate your pipeline.  The most common datasets used for machine translation are from <span class="cm-link">[WMT]</span><span class="cm-string cm-url">(http://www.statmt.org/)</span>.  However, that will take a long time to train a neural network on.  We'll be using a dataset we created for this project that contains a small vocabulary.  You'll be able to train your model in a reasonable time with this dataset.</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-3">### Load Data</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">The data is located in <span class="cm-comment">`data/small_vocab_en`</span> and <span class="cm-comment">`data/small_vocab_fr`</span>. The <span class="cm-comment">`small_vocab_en`</span> file contains English sentences with their French translations in the <span class="cm-comment">`small_vocab_fr`</span> file. Load the English and French data from these files from running the cell below.</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 407px;"></div><div class="CodeMirror-gutters" style="display: none; height: 426px;"></div></div></div></div><div class="text_cell_render rendered_html" tabindex="-1"><h1 id="Artificial-Intelligence-Nanodegree-1" saveid="Artificial-Intelligence-Nanodegree"><span class="toc-item-num">1&nbsp;&nbsp;</span><a name="Artificial-Intelligence-Nanodegree"></a>Artificial Intelligence Nanodegree<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Artificial-Intelligence-Nanodegree">¶</a></h1>
<h2 id="Machine-Translation-Project-11" saveid="Machine-Translation-Project"><span class="toc-item-num">1.1&nbsp;&nbsp;</span><a name="Machine-Translation-Project"></a>Machine Translation Project<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Machine-Translation-Project">¶</a></h2>
<p>In this notebook, sections that end with <strong>'(IMPLEMENTATION)'</strong> in the header indicate that the following blocks of code will require additional functionality which you must provide. Please be sure to read the instructions carefully!</p>
<h2 id="Introduction-12" saveid="Introduction"><span class="toc-item-num">1.2&nbsp;&nbsp;</span><a name="Introduction"></a>Introduction<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Introduction">¶</a></h2>
<p>In this notebook, you will build a deep neural network that functions as part of an end-to-end machine translation pipeline. Your completed pipeline will accept English text as input and return the French translation.</p>
<ul>
<li><strong>Preprocess</strong> - You'll convert text to sequence of integers.</li>
<li><strong>Models</strong> Create models which accepts a sequence of integers as input and returns a probability distribution over possible translations. After learning about the basic types of neural networks that are often used for machine translation, you will engage in your own investigations, to design your own model!</li>
<li><strong>Prediction</strong> Run the model on English text.</li>
</ul>
<h2 id="Dataset-13" saveid="Dataset"><span class="toc-item-num">1.3&nbsp;&nbsp;</span><a name="Dataset"></a>Dataset<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Dataset">¶</a></h2>
<p>We begin by investigating the dataset that will be used to train and evaluate your pipeline.  The most common datasets used for machine translation are from <a href="http://www.statmt.org/" target="_blank">WMT</a>.  However, that will take a long time to train a neural network on.  We'll be using a dataset we created for this project that contains a small vocabulary.  You'll be able to train your model in a reasonable time with this dataset.</p>
<h3 id="Load-Data-131" saveid="Load-Data"><span class="toc-item-num">1.3.1&nbsp;&nbsp;</span><a name="Load-Data"></a>Load Data<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Load-Data">¶</a></h3>
<p>The data is located in <code>data/small_vocab_en</code> and <code>data/small_vocab_fr</code>. The <code>small_vocab_en</code> file contains English sentences with their French translations in the <code>small_vocab_fr</code> file. Load the English and French data from these files from running the cell below.</p>
</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[1]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 22.2604px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 416px; margin-bottom: -11px; border-right-width: 19px; min-height: 145px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style=""><div class="CodeMirror-cursor" style="left: 0px; top: 16.6667px; height: 16.6667px;">&nbsp;</div></div><div class="CodeMirror-code" style=""><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">helper</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># Load English data</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">english_sentences</span> = <span class="cm-variable">helper</span>.<span class="cm-property">load_data</span>(<span class="cm-string">'data/small_vocab_en'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># Load French data</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">french_sentences</span> = <span class="cm-variable">helper</span>.<span class="cm-property">load_data</span>(<span class="cm-string">'data/small_vocab_fr'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-string">'Dataset Loaded'</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 145px;"></div><div class="CodeMirror-gutters" style="display: none; height: 164px;"></div></div></div></div></div></div><div class="widget-area" style="display: none;"><div class="prompt"><button class="close">×</button></div><div class="widget-subarea jp-Output-result"></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to scroll output; double click to hide" style=""></div><div class="output" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>Dataset Loaded
</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell text_cell rendered unselected" tabindex="2"><div class="prompt input_prompt"></div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; padding-right: 0px; padding-bottom: 0px; margin-bottom: -11px; border-right-width: 19px; min-height: 62px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 17.3333px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-3">### Files</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">Each line in <span class="cm-comment">`small_vocab_en`</span> contains an English sentence with the respective translation in each line of <span class="cm-comment">`small_vocab_fr`</span>.  View the first two lines from each file.</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 62px;"></div><div class="CodeMirror-gutters" style="display: none; height: 81px;"></div></div></div></div><div class="text_cell_render rendered_html" tabindex="-1"><h3 id="Files-132" saveid="Files"><span class="toc-item-num">1.3.2&nbsp;&nbsp;</span><a name="Files"></a>Files<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Files">¶</a></h3>
<p>Each line in <code>small_vocab_en</code> contains an English sentence with the respective translation in each line of <code>small_vocab_fr</code>.  View the first two lines from each file.</p>
</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[2]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 633px; margin-bottom: -11px; border-right-width: 19px; min-height: 61px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 16.6667px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">sample_i</span> <span class="cm-keyword">in</span> <span class="cm-builtin">range</span>(<span class="cm-number">2</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">print</span>(<span class="cm-string">'small_vocab_en Line {}:  {}'</span>.<span class="cm-property">format</span>(<span class="cm-variable">sample_i</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">english_sentences</span>[<span class="cm-variable">sample_i</span>]))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">print</span>(<span class="cm-string">'small_vocab_fr Line {}:  {}'</span>.<span class="cm-property">format</span>(<span class="cm-variable">sample_i</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">french_sentences</span>[<span class="cm-variable">sample_i</span>]))</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 61px;"></div><div class="CodeMirror-gutters" style="display: none; height: 80px;"></div></div></div></div></div></div><div class="widget-area" style="display: none;"><div class="prompt"><button class="close">×</button></div><div class="widget-subarea jp-Output-result"></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to scroll output; double click to hide" style=""></div><div class="output" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>small_vocab_en Line 1:  new jersey is sometimes quiet during autumn , and it is snowy in april .
small_vocab_fr Line 1:  new jersey est parfois calme pendant l' automne , et il est neigeux en avril .
small_vocab_en Line 2:  the united states is usually chilly during july , and it is usually freezing in november .
small_vocab_fr Line 2:  les 茅tats-unis est g茅n茅ralement froid en juillet , et il g猫le habituellement en novembre .
</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell text_cell rendered unselected" tabindex="2"><div class="prompt input_prompt"></div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; padding-right: 0px; padding-bottom: 0px; margin-bottom: -11px; border-right-width: 19px; min-height: 95px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 16.6666px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">From looking at the sentences, you can see they have been preprocessed already.  The puncuations have been delimited using spaces. All the text have been converted to lowercase.  This should save you some time, but the text requires more preprocessing.</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-3">### Vocabulary</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">The complexity of the problem is determined by the complexity of the vocabulary.  A more complex vocabulary is a more complex problem.  Let's look at the complexity of the dataset we'll be working with.</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 95px;"></div><div class="CodeMirror-gutters" style="display: none; height: 114px;"></div></div></div></div><div class="text_cell_render rendered_html" tabindex="-1"><p>From looking at the sentences, you can see they have been preprocessed already.  The puncuations have been delimited using spaces. All the text have been converted to lowercase.  This should save you some time, but the text requires more preprocessing.</p>
<h3 id="Vocabulary-133" saveid="Vocabulary"><span class="toc-item-num">1.3.3&nbsp;&nbsp;</span><a name="Vocabulary"></a>Vocabulary<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Vocabulary">¶</a></h3>
<p>The complexity of the problem is determined by the complexity of the vocabulary.  A more complex vocabulary is a more complex problem.  Let's look at the complexity of the dataset we'll be working with.</p>
</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[3]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 22.2604px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 803.667px; margin-bottom: -11px; border-right-width: 19px; min-height: 245px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style="visibility: hidden;"><div class="CodeMirror-cursor" style="left: 0px; top: 16.6666px; height: 16.6667px;">&nbsp;</div></div><div class="CodeMirror-code" style=""><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">collections</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">english_words_counter</span> = <span class="cm-variable">collections</span>.<span class="cm-property">Counter</span>([<span class="cm-variable">word</span> <span class="cm-keyword">for</span> <span class="cm-variable">sentence</span> <span class="cm-keyword">in</span> <span class="cm-variable">english_sentences</span> <span class="cm-keyword">for</span> <span class="cm-variable">word</span> <span class="cm-keyword">in</span> <span class="cm-variable">sentence</span>.<span class="cm-property">split</span>()])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">french_words_counter</span> = <span class="cm-variable">collections</span>.<span class="cm-property">Counter</span>([<span class="cm-variable">word</span> <span class="cm-keyword">for</span> <span class="cm-variable">sentence</span> <span class="cm-keyword">in</span> <span class="cm-variable">french_sentences</span> <span class="cm-keyword">for</span> <span class="cm-variable">word</span> <span class="cm-keyword">in</span> <span class="cm-variable">sentence</span>.<span class="cm-property">split</span>()])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-string">'{} English words.'</span>.<span class="cm-property">format</span>(<span class="cm-builtin">len</span>([<span class="cm-variable">word</span> <span class="cm-keyword">for</span> <span class="cm-variable">sentence</span> <span class="cm-keyword">in</span> <span class="cm-variable">english_sentences</span> <span class="cm-keyword">for</span> <span class="cm-variable">word</span> <span class="cm-keyword">in</span> <span class="cm-variable">sentence</span>.<span class="cm-property">split</span>()])))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-string">'{} unique English words.'</span>.<span class="cm-property">format</span>(<span class="cm-builtin">len</span>(<span class="cm-variable">english_words_counter</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-string">'10 Most common words in the English dataset:'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-string">'"'</span> <span class="cm-operator">+</span> <span class="cm-string">'" "'</span>.<span class="cm-property">join</span>(<span class="cm-builtin">list</span>(<span class="cm-builtin">zip</span>(<span class="cm-operator">*</span><span class="cm-variable">english_words_counter</span>.<span class="cm-property">most_common</span>(<span class="cm-number">10</span>)))[<span class="cm-number">0</span>]) <span class="cm-operator">+</span> <span class="cm-string">'"'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-builtin">print</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-string">'{} French words.'</span>.<span class="cm-property">format</span>(<span class="cm-builtin">len</span>([<span class="cm-variable">word</span> <span class="cm-keyword">for</span> <span class="cm-variable">sentence</span> <span class="cm-keyword">in</span> <span class="cm-variable">french_sentences</span> <span class="cm-keyword">for</span> <span class="cm-variable">word</span> <span class="cm-keyword">in</span> <span class="cm-variable">sentence</span>.<span class="cm-property">split</span>()])))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-string">'{} unique French words.'</span>.<span class="cm-property">format</span>(<span class="cm-builtin">len</span>(<span class="cm-variable">french_words_counter</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-string">'10 Most common words in the French dataset:'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-string">'"'</span> <span class="cm-operator">+</span> <span class="cm-string">'" "'</span>.<span class="cm-property">join</span>(<span class="cm-builtin">list</span>(<span class="cm-builtin">zip</span>(<span class="cm-operator">*</span><span class="cm-variable">french_words_counter</span>.<span class="cm-property">most_common</span>(<span class="cm-number">10</span>)))[<span class="cm-number">0</span>]) <span class="cm-operator">+</span> <span class="cm-string">'"'</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 245px;"></div><div class="CodeMirror-gutters" style="display: none; height: 264px;"></div></div></div></div></div></div><div class="widget-area" style="display: none;"><div class="prompt"><button class="close">×</button></div><div class="widget-subarea jp-Output-result"></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to scroll output; double click to hide" style=""></div><div class="output" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>1823250 English words.
227 unique English words.
10 Most common words in the English dataset:
"is" "," "." "in" "it" "during" "the" "but" "and" "sometimes"

1961295 French words.
355 unique French words.
10 Most common words in the French dataset:
"est" "." "," "en" "il" "les" "mais" "et" "la" "parfois"
</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell text_cell rendered unselected" tabindex="2"><div class="prompt input_prompt"></div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; padding-right: 0px; padding-bottom: 0px; margin-bottom: -11px; border-right-width: 19px; min-height: 365px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 16.6666px;">&nbsp;</div></div><div class="CodeMirror-code" style=""><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">For comparison, <span class="cm-em">_Alice's Adventures in Wonderland_</span> contains 2,766 unique words of a total of 15,500 words.</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-2">## Preprocess</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">For this project, you won't use text data as input to your model. Instead, you'll convert the text into sequences of integers using the following preprocess methods:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable-2">1. Tokenize the words into ids</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable-2">2. Add padding to make all the sequences the same length.</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">Time to start preprocessing the data...</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-3">### Tokenize (IMPLEMENTATION)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">For a neural network to predict on text data, it first has to be turned into data it can understand. Text data like "dog" is a sequence of ASCII character encodings.  Since a neural network is a series of multiplication and addition operations, the input data needs to be number(s).</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">We can turn each character into a number or each word into a number.  These are called character and word ids, respectively.  Character ids are used for character level models that generate text predictions for each character.  A word level model uses word ids that generate text predictions for each word.  Word level models tend to learn better, since they are lower in complexity, so we'll use those.</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">Turn each sentence into a sequence of words ids using Keras's <span class="cm-link">[</span><span class="cm-link cm-comment">`Tokenizer`</span><span class="cm-link">]</span><span class="cm-string cm-url">(https://keras.io/preprocessing/text/#tokenizer)</span> function. Use this function to tokenize <span class="cm-comment">`english_sentences`</span> and <span class="cm-comment">`french_sentences`</span> in the cell below.</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">Running the cell will run <span class="cm-comment">`tokenize`</span> on sample data and show output for debugging.</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 365px;"></div><div class="CodeMirror-gutters" style="display: none; height: 384px;"></div></div></div></div><div class="text_cell_render rendered_html" tabindex="-1"><p>For comparison, <em>Alice's Adventures in Wonderland</em> contains 2,766 unique words of a total of 15,500 words.</p>
<h2 id="Preprocess-14" saveid="Preprocess"><span class="toc-item-num">1.4&nbsp;&nbsp;</span><a name="Preprocess"></a>Preprocess<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Preprocess">¶</a></h2>
<p>For this project, you won't use text data as input to your model. Instead, you'll convert the text into sequences of integers using the following preprocess methods:</p>
<ol>
<li>Tokenize the words into ids</li>
<li>Add padding to make all the sequences the same length.</li>
</ol>
<p>Time to start preprocessing the data...</p>
<h3 id="Tokenize-(IMPLEMENTATION)-141" saveid="Tokenize-(IMPLEMENTATION)"><span class="toc-item-num">1.4.1&nbsp;&nbsp;</span><a name="Tokenize-(IMPLEMENTATION)"></a>Tokenize (IMPLEMENTATION)<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Tokenize-(IMPLEMENTATION)">¶</a></h3>
<p>For a neural network to predict on text data, it first has to be turned into data it can understand. Text data like "dog" is a sequence of ASCII character encodings.  Since a neural network is a series of multiplication and addition operations, the input data needs to be number(s).</p>
<p>We can turn each character into a number or each word into a number.  These are called character and word ids, respectively.  Character ids are used for character level models that generate text predictions for each character.  A word level model uses word ids that generate text predictions for each word.  Word level models tend to learn better, since they are lower in complexity, so we'll use those.</p>
<p>Turn each sentence into a sequence of words ids using Keras's <a href="https://keras.io/preprocessing/text/#tokenizer" target="_blank"><code>Tokenizer</code></a> function. Use this function to tokenize <code>english_sentences</code> and <code>french_sentences</code> in the cell below.</p>
<p>Running the cell will run <code>tokenize</code> on sample data and show output for debugging.</p>
</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[4]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 172.261px; left: 33.5938px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 585.354px; margin-bottom: -11px; border-right-width: 19px; min-height: 478px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style=""><div class="CodeMirror-cursor" style="left: 28px; top: 166.667px; height: 16.6667px;">&nbsp;</div></div><div class="CodeMirror-code" style=""><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">project_tests</span> <span class="cm-keyword">as</span> <span class="cm-variable">tests</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">preprocessing</span>.<span class="cm-property">text</span> <span class="cm-keyword">import</span> <span class="cm-variable">Tokenizer</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">tokenize</span>(<span class="cm-variable">x</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-string">"""</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    Tokenize x</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param x: List of sentences/strings to be tokenized</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :return: Tuple of (tokenized x data, tokenizer used to tokenize x)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    """</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment"># TODO: Implement</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">tokenizer</span> = <span class="cm-variable">Tokenizer</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">tokenizer</span>.<span class="cm-property">fit_on_texts</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-variable">tokenizer</span>.<span class="cm-property">texts_to_sequences</span>(<span class="cm-variable">x</span>), <span class="cm-variable">tokenizer</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">tests</span>.<span class="cm-property">test_tokenize</span>(<span class="cm-variable">tokenize</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># Tokenize Example output</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">text_sentences</span> = [</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-string">'The quick brown fox jumps over the lazy dog .'</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-string">'By Jove , my quick study of lexicography won a prize .'</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-string">'This is a short sentence .'</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">text_tokenized</span>, <span class="cm-variable">text_tokenizer</span> = <span class="cm-variable">tokenize</span>(<span class="cm-variable">text_sentences</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-variable">text_tokenizer</span>.<span class="cm-property">word_index</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-builtin">print</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">sample_i</span>, (<span class="cm-variable">sent</span>, <span class="cm-variable">token_sent</span>) <span class="cm-keyword">in</span> <span class="cm-builtin">enumerate</span>(<span class="cm-builtin">zip</span>(<span class="cm-variable">text_sentences</span>, <span class="cm-variable">text_tokenized</span>)):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">print</span>(<span class="cm-string">'Sequence {} in x'</span>.<span class="cm-property">format</span>(<span class="cm-variable">sample_i</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">print</span>(<span class="cm-string">'  Input:  {}'</span>.<span class="cm-property">format</span>(<span class="cm-variable">sent</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">print</span>(<span class="cm-string">'  Output: {}'</span>.<span class="cm-property">format</span>(<span class="cm-variable">token_sent</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 478px;"></div><div class="CodeMirror-gutters" style="display: none; height: 497px;"></div></div></div></div></div></div><div class="widget-area" style="display: none;"><div class="prompt"><button class="close">×</button></div><div class="widget-subarea jp-Output-result"></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to scroll output; double click to hide" style=""></div><div class="output" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stderr"><pre>Using TensorFlow backend.
</pre></div></div><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>{'lexicography': 4, 'over': 5, 'prize': 6, 'a': 1, 'quick': 2, 'jove': 8, 'the': 3, 'my': 9, 'dog': 11, 'is': 12, 'won': 16, 'fox': 13, 'brown': 15, 'jumps': 20, 'of': 18, 'this': 10, 'by': 17, 'sentence': 7, 'lazy': 19, 'study': 14, 'short': 21}

Sequence 1 in x
  Input:  The quick brown fox jumps over the lazy dog .
  Output: [3, 2, 15, 13, 20, 5, 3, 19, 11]
Sequence 2 in x
  Input:  By Jove , my quick study of lexicography won a prize .
  Output: [17, 8, 9, 2, 14, 18, 4, 16, 1, 6]
Sequence 3 in x
  Input:  This is a short sentence .
  Output: [10, 12, 1, 21, 7]
</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell text_cell rendered unselected" tabindex="2"><div class="prompt input_prompt"></div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; padding-right: 0px; padding-bottom: 0px; margin-bottom: -11px; border-right-width: 19px; min-height: 112px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 17.3333px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-3">### Padding (IMPLEMENTATION)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">When batching the sequence of word ids together, each sequence needs to be the same length.  Since sentences are dynamic in length, we can add padding to the end of the sequences to make them the same length.</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">Make sure all the English sequences have the same length and all the French sequences have the same length by adding padding to the <span class="cm-strong">**end**</span> of each sequence using Keras's <span class="cm-link">[</span><span class="cm-link cm-comment">`pad_sequences`</span><span class="cm-link">]</span><span class="cm-string cm-url">(https://keras.io/preprocessing/sequence/#pad_sequences)</span> function.</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 112px;"></div><div class="CodeMirror-gutters" style="display: none; height: 131px;"></div></div></div></div><div class="text_cell_render rendered_html" tabindex="-1"><h3 id="Padding-(IMPLEMENTATION)-142" saveid="Padding-(IMPLEMENTATION)"><span class="toc-item-num">1.4.2&nbsp;&nbsp;</span><a name="Padding-(IMPLEMENTATION)"></a>Padding (IMPLEMENTATION)<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Padding-(IMPLEMENTATION)">¶</a></h3>
<p>When batching the sequence of word ids together, each sequence needs to be the same length.  Since sentences are dynamic in length, we can add padding to the end of the sequences to make them the same length.</p>
<p>Make sure all the English sequences have the same length and all the French sequences have the same length by adding padding to the <strong>end</strong> of each sequence using Keras's <a href="https://keras.io/preprocessing/sequence/#pad_sequences" target="_blank"><code>pad_sequences</code></a> function.</p>
</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[5]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 38.9272px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 718.635px; margin-bottom: -11px; border-right-width: 19px; min-height: 345px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style="visibility: hidden;"><div class="CodeMirror-cursor" style="left: 0px; top: 33.3335px; height: 16.6667px;">&nbsp;</div></div><div class="CodeMirror-code" style=""><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">numpy</span> <span class="cm-keyword">as</span> <span class="cm-variable">np</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">preprocessing</span>.<span class="cm-property">sequence</span> <span class="cm-keyword">import</span> <span class="cm-variable">pad_sequences</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">pad</span>(<span class="cm-variable">x</span>, <span class="cm-variable">length</span>=<span class="cm-keyword">None</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-string">"""</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    Pad x</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param x: List of sequences.</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param length: Length to pad the sequence to.  If None, use length of longest sequence in x.</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :return: Padded numpy array of sequences</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    """</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment"># TODO: Implement</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span>  <span class="cm-variable">pad_sequences</span>(<span class="cm-variable">x</span>, <span class="cm-variable">maxlen</span>=<span class="cm-variable">length</span>, <span class="cm-variable">dtype</span>=<span class="cm-string">'int32'</span>,<span class="cm-variable">padding</span>=<span class="cm-string">'post'</span>, <span class="cm-variable">truncating</span>=<span class="cm-string">'post'</span>, <span class="cm-variable">value</span>=<span class="cm-number">0.</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">tests</span>.<span class="cm-property">test_pad</span>(<span class="cm-variable">pad</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># Pad Tokenized output</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">test_pad</span> = <span class="cm-variable">pad</span>(<span class="cm-variable">text_tokenized</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">sample_i</span>, (<span class="cm-variable">token_sent</span>, <span class="cm-variable">pad_sent</span>) <span class="cm-keyword">in</span> <span class="cm-builtin">enumerate</span>(<span class="cm-builtin">zip</span>(<span class="cm-variable">text_tokenized</span>, <span class="cm-variable">test_pad</span>)):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">print</span>(<span class="cm-string">'Sequence {} in x'</span>.<span class="cm-property">format</span>(<span class="cm-variable">sample_i</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">print</span>(<span class="cm-string">'  Input:  {}'</span>.<span class="cm-property">format</span>(<span class="cm-variable">np</span>.<span class="cm-property">array</span>(<span class="cm-variable">token_sent</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">print</span>(<span class="cm-string">'  Output: {}'</span>.<span class="cm-property">format</span>(<span class="cm-variable">pad_sent</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 345px;"></div><div class="CodeMirror-gutters" style="display: none; height: 364px;"></div></div></div></div></div></div><div class="widget-area" style="display: none;"><div class="prompt"><button class="close">×</button></div><div class="widget-subarea jp-Output-result"></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to scroll output; double click to hide" style=""></div><div class="output" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>Sequence 1 in x
  Input:  [ 3  2 15 13 20  5  3 19 11]
  Output: [ 3  2 15 13 20  5  3 19 11  0]
Sequence 2 in x
  Input:  [17  8  9  2 14 18  4 16  1  6]
  Output: [17  8  9  2 14 18  4 16  1  6]
Sequence 3 in x
  Input:  [10 12  1 21  7]
  Output: [10 12  1 21  7  0  0  0  0  0]
</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell text_cell rendered unselected" tabindex="2"><div class="prompt input_prompt"></div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; padding-right: 0px; padding-bottom: 0px; margin-bottom: -11px; border-right-width: 19px; min-height: 62px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 17.3333px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-3">### Preprocess Pipeline</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">Your focus for this project is to build neural network architecture, so we won't ask you to create a preprocess pipeline.  Instead, we've provided you with the implementation of the <span class="cm-comment">`preprocess`</span> function.</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 62px;"></div><div class="CodeMirror-gutters" style="display: none; height: 81px;"></div></div></div></div><div class="text_cell_render rendered_html" tabindex="-1"><h3 id="Preprocess-Pipeline-143" saveid="Preprocess-Pipeline"><span class="toc-item-num">1.4.3&nbsp;&nbsp;</span><a name="Preprocess-Pipeline"></a>Preprocess Pipeline<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Preprocess-Pipeline">¶</a></h3>
<p>Your focus for this project is to build neural network architecture, so we won't ask you to create a preprocess pipeline.  Instead, we've provided you with the implementation of the <code>preprocess</code> function.</p>
</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[6]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 155.594px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 675px; margin-bottom: -11px; border-right-width: 19px; min-height: 378px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style="visibility: hidden;"><div class="CodeMirror-cursor" style="left: 0px; top: 150.001px; height: 16.6667px;">&nbsp;</div></div><div class="CodeMirror-code" style=""><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">preprocess</span>(<span class="cm-variable">x</span>, <span class="cm-variable">y</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-string">"""</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    Preprocess x and y</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param x: Feature List of sentences</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param y: Label List of sentences</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :return: Tuple of (Preprocessed x, Preprocessed y, x tokenizer, y tokenizer)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    """</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">preprocess_x</span>, <span class="cm-variable">x_tk</span> = <span class="cm-variable">tokenize</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">preprocess_y</span>, <span class="cm-variable">y_tk</span> = <span class="cm-variable">tokenize</span>(<span class="cm-variable">y</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">preprocess_x</span> = <span class="cm-variable">pad</span>(<span class="cm-variable">preprocess_x</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">preprocess_y</span> = <span class="cm-variable">pad</span>(<span class="cm-variable">preprocess_y</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment"># Keras's sparse_categorical_crossentropy function requires the labels to be in 3 dimensions</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">preprocess_y</span> = <span class="cm-variable">preprocess_y</span>.<span class="cm-property">reshape</span>(<span class="cm-operator">*</span><span class="cm-variable">preprocess_y</span>.<span class="cm-property">shape</span>, <span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-variable">preprocess_x</span>, <span class="cm-variable">preprocess_y</span>, <span class="cm-variable">x_tk</span>, <span class="cm-variable">y_tk</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">preproc_english_sentences</span>, <span class="cm-variable">preproc_french_sentences</span>, <span class="cm-variable">english_tokenizer</span>, <span class="cm-variable">french_tokenizer</span> =<span class="cm-error">\</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">preprocess</span>(<span class="cm-variable">english_sentences</span>, <span class="cm-variable">french_sentences</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-string">'Data Preprocessed'</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 378px;"></div><div class="CodeMirror-gutters" style="display: none; height: 397px;"></div></div></div></div></div></div><div class="widget-area" style="display: none;"><div class="prompt"><button class="close">×</button></div><div class="widget-subarea jp-Output-result"></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to scroll output; double click to hide" style=""></div><div class="output" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>Data Preprocessed
</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell text_cell rendered unselected" tabindex="2"><div class="prompt input_prompt"></div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; padding-right: 0px; padding-bottom: 0px; margin-bottom: -11px; border-right-width: 19px; min-height: 248px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 19.3335px;">&nbsp;</div></div><div class="CodeMirror-code" style=""><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-2">## Models</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">In this section, you will experiment with various neural network architectures.</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">You will begin by training four relatively simple architectures.</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable-2">- Model 1 is a simple RNN</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable-2">- Model 2 is a RNN with Embedding</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable-2">- Model 3 is a Bidirectional RNN</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable-2">- Model 4 is an optional Encoder-Decoder RNN</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">After experimenting with the four simple architectures, you will construct a deeper architecture that is designed to outperform all four models.</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-3">### Ids Back to Text</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">The neural network will be translating the input to words ids, which isn't the final form we want.  We want the French translation.  The function <span class="cm-comment">`logits_to_text`</span> will bridge the gab between the logits from the neural network to the French translation.  You'll be using this function to better understand the output of the neural network.</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 248px;"></div><div class="CodeMirror-gutters" style="display: none; height: 267px;"></div></div></div></div><div class="text_cell_render rendered_html" tabindex="-1"><h2 id="Models-15" saveid="Models"><span class="toc-item-num">1.5&nbsp;&nbsp;</span><a name="Models"></a>Models<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Models">¶</a></h2>
<p>In this section, you will experiment with various neural network architectures.
You will begin by training four relatively simple architectures.</p>
<ul>
<li>Model 1 is a simple RNN</li>
<li>Model 2 is a RNN with Embedding</li>
<li>Model 3 is a Bidirectional RNN</li>
<li>Model 4 is an optional Encoder-Decoder RNN</li>
</ul>
<p>After experimenting with the four simple architectures, you will construct a deeper architecture that is designed to outperform all four models.</p>
<h3 id="Ids-Back-to-Text-151" saveid="Ids-Back-to-Text"><span class="toc-item-num">1.5.1&nbsp;&nbsp;</span><a name="Ids-Back-to-Text"></a>Ids Back to Text<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Ids-Back-to-Text">¶</a></h3>
<p>The neural network will be translating the input to words ids, which isn't the final form we want.  We want the French translation.  The function <code>logits_to_text</code> will bridge the gab between the logits from the neural network to the French translation.  You'll be using this function to better understand the output of the neural network.</p>
</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[7]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 38.9268px; left: 19.5938px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 621.667px; margin-bottom: -11px; border-right-width: 19px; min-height: 228px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style="visibility: hidden;"><div class="CodeMirror-cursor" style="left: 14px; top: 33.333px; height: 16.6667px;">&nbsp;</div></div><div class="CodeMirror-code" style=""><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">logits_to_text</span>(<span class="cm-variable">logits</span>, <span class="cm-variable">tokenizer</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-string">"""</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    Turn logits from a neural network into text using the tokenizer</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param logits: Logits from a neural network</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param tokenizer: Keras Tokenizer fit on the labels</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :return: String that represents the text of the logits</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    """</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">index_to_words</span> = {<span class="cm-builtin">id</span>: <span class="cm-variable">word</span> <span class="cm-keyword">for</span> <span class="cm-variable">word</span>, <span class="cm-builtin">id</span> <span class="cm-keyword">in</span> <span class="cm-variable">tokenizer</span>.<span class="cm-property">word_index</span>.<span class="cm-property">items</span>()}</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">index_to_words</span>[<span class="cm-number">0</span>] = <span class="cm-string">'&lt;PAD&gt;'</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-string">' '</span>.<span class="cm-property">join</span>([<span class="cm-variable">index_to_words</span>[<span class="cm-variable">prediction</span>] <span class="cm-keyword">for</span> <span class="cm-variable">prediction</span> <span class="cm-keyword">in</span> <span class="cm-variable">np</span>.<span class="cm-property">argmax</span>(<span class="cm-variable">logits</span>, <span class="cm-number">1</span>)])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-string">'`logits_to_text` function loaded.'</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 228px;"></div><div class="CodeMirror-gutters" style="display: none; height: 247px;"></div></div></div></div></div></div><div class="widget-area" style="display: none;"><div class="prompt"><button class="close">×</button></div><div class="widget-subarea jp-Output-result"></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to scroll output; double click to hide" style=""></div><div class="output" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>`logits_to_text` function loaded.
</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell text_cell rendered unselected" tabindex="2"><div class="prompt input_prompt"></div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; padding-right: 0px; padding-bottom: 0px; margin-bottom: -11px; border-right-width: 19px; min-height: 62px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 17.3335px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-3">### Model 1: RNN (IMPLEMENTATION)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-image cm-image-marker">!</span><span class="cm-image cm-image-alt-text cm-link">[RNN]</span><span class="cm-string cm-url">(images/rnn.png)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">A basic RNN model is a good baseline for sequence data.  In this model, you'll build a RNN that translates English to French.</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 62px;"></div><div class="CodeMirror-gutters" style="display: none; height: 81px;"></div></div></div></div><div class="text_cell_render rendered_html" tabindex="-1"><h3 id="Model-1:-RNN-(IMPLEMENTATION)-152" saveid="Model-1:-RNN-(IMPLEMENTATION)"><span class="toc-item-num">1.5.2&nbsp;&nbsp;</span><a name="Model-1:-RNN-(IMPLEMENTATION)"></a>Model 1: RNN (IMPLEMENTATION)<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Model-1:-RNN-(IMPLEMENTATION)">¶</a></h3>
<p><img src="./machine_translation_files/rnn.png" alt="RNN">
A basic RNN model is a good baseline for sequence data.  In this model, you'll build a RNN that translates English to French.</p>
</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[8]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 305.591px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 738px; margin-bottom: -11px; border-right-width: 19px; min-height: 761px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"><div class="CodeMirror-selected" style="position: absolute; left: 0px; top: 300px; width: 848px; height: 17px;"></div><div class="CodeMirror-selected" style="position: absolute; left: 0px; top: 350px; width: 413px; height: 17px;"></div><div class="CodeMirror-selected" style="position: absolute; left: 0px; top: 317px; width: 848px; height: 33px;"></div></div><div class="CodeMirror-cursors" style=""></div><div class="CodeMirror-code" style=""><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">layers</span> <span class="cm-keyword">import</span> <span class="cm-variable">GRU</span>, <span class="cm-variable">Input</span>, <span class="cm-variable">Dense</span>, <span class="cm-variable">TimeDistributed</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">models</span> <span class="cm-keyword">import</span> <span class="cm-variable">Model</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">layers</span> <span class="cm-keyword">import</span> <span class="cm-variable">Activation</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">optimizers</span> <span class="cm-keyword">import</span> <span class="cm-variable">Adam</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">losses</span> <span class="cm-keyword">import</span> <span class="cm-variable">sparse_categorical_crossentropy</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">layers</span> <span class="cm-keyword">import</span> <span class="cm-variable">SimpleRNN</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras_tqdm</span> <span class="cm-keyword">import</span> <span class="cm-variable">TQDMNotebookCallback</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">simple_model</span>(<span class="cm-variable">input_shape</span>, <span class="cm-variable">output_sequence_length</span>, <span class="cm-variable">english_vocab_size</span>, <span class="cm-variable">french_vocab_size</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-string">"""</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    Build and train a basic RNN on x and y</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param input_shape: Tuple of input shape</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param output_sequence_length: Length of output sequence</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param english_vocab_size: Number of unique English words in the dataset</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param french_vocab_size: Number of unique French words in the dataset</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :return: Keras model built, but not trained</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    """</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment"># TODO: Build the layers</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">main_inputs</span> = <span class="cm-variable">Input</span>(<span class="cm-variable">shape</span>=<span class="cm-variable">input_shape</span>[<span class="cm-number">1</span>:<span class="cm-number">3</span>]) </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">x</span> = <span class="cm-variable">GRU</span>(<span class="cm-variable">units</span>=<span class="cm-number">64</span>,<span class="cm-variable">return_sequences</span>=<span class="cm-keyword">True</span>)(<span class="cm-variable">main_inputs</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">main_outputs</span> = <span class="cm-variable">TimeDistributed</span>(<span class="cm-variable">Dense</span>(<span class="cm-variable">french_vocab_size</span>,<span class="cm-variable">activation</span>=<span class="cm-string">'softmax'</span>))(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">model</span> = <span class="cm-variable">Model</span>(<span class="cm-variable">inputs</span>=<span class="cm-variable">main_inputs</span>, <span class="cm-variable">outputs</span>=<span class="cm-variable">main_outputs</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">learning_rate</span> = <span class="cm-number">0.01</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">model</span>.<span class="cm-property">compile</span>(<span class="cm-variable">loss</span>=<span class="cm-variable">sparse_categorical_crossentropy</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                  <span class="cm-variable">optimizer</span>=<span class="cm-variable">Adam</span>(<span class="cm-variable">learning_rate</span>),</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                  <span class="cm-variable">metrics</span>=[<span class="cm-string">'accuracy'</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-variable">model</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># tests.test_simple_model(simple_model)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># Reshaping the input to work with a basic RNN</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">tmp_x</span> = <span class="cm-variable">pad</span>(<span class="cm-variable">preproc_english_sentences</span>, <span class="cm-variable">preproc_french_sentences</span>.<span class="cm-property">shape</span>[<span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">tmp_x</span> = <span class="cm-variable">tmp_x</span>.<span class="cm-property">reshape</span>((<span class="cm-operator">-</span><span class="cm-number">1</span>, <span class="cm-variable">preproc_french_sentences</span>.<span class="cm-property">shape</span>[<span class="cm-operator">-</span><span class="cm-number">2</span>], <span class="cm-number">1</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># Train the neural network</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">simple_rnn_model</span> = <span class="cm-variable">simple_model</span>(</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">tmp_x</span>.<span class="cm-property">shape</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">preproc_french_sentences</span>.<span class="cm-property">shape</span>[<span class="cm-number">1</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">len</span>(<span class="cm-variable">english_tokenizer</span>.<span class="cm-property">word_index</span>)<span class="cm-operator">+</span><span class="cm-number">1</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">len</span>(<span class="cm-variable">french_tokenizer</span>.<span class="cm-property">word_index</span>)<span class="cm-operator">+</span><span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># simple_rnn_model.fit(tmp_x, preproc_french_sentences, batch_size=1024, epochs=10, validation_split=0.2)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># # Print prediction(s)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># print(logits_to_text(simple_rnn_model.predict(tmp_x[:1])[0], french_tokenizer))</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 761px;"></div><div class="CodeMirror-gutters" style="display: none; height: 780px;"></div></div></div></div></div></div><div class="widget-area" style="display: none;"><div class="prompt"><button class="close">×</button></div><div class="widget-subarea jp-Output-result"></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to scroll output; double click to hide" style="display: none;"></div><div class="output" style="display: none;"></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[9]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 103.594px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 185px; margin-bottom: -11px; border-right-width: 19px; min-height: 28px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style="visibility: hidden;"><div class="CodeMirror-cursor" style="left: 98px; top: 0px; height: 16.6667px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">simple_rnn_model</span>.<span class="cm-property">summary</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 28px;"></div><div class="CodeMirror-gutters" style="display: none; height: 47px;"></div></div></div></div></div></div><div class="widget-area" style="display: none;"><div class="prompt"><button class="close">×</button></div><div class="widget-subarea jp-Output-result"></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to scroll output; double click to hide" style=""></div><div class="output" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
input_1 (InputLayer)         (None, 21, 1)             0         
_________________________________________________________________
gru_1 (GRU)                  (None, 21, 64)            12672     
_________________________________________________________________
time_distributed_1 (TimeDist (None, 21, 346)           22490     
=================================================================
Total params: 35,162
Trainable params: 35,162
Non-trainable params: 0
_________________________________________________________________
</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[12]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 796.594px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true" style="right: 0px; left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 794px; margin-bottom: -11px; border-right-width: 19px; min-height: 61px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style=""><div class="CodeMirror-cursor" style="left: 791px; top: 0px; height: 16.6666px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">simple_rnn_model</span>.<span class="cm-property">fit</span>(<span class="cm-variable">tmp_x</span>, <span class="cm-variable">preproc_french_sentences</span>, <span class="cm-variable">batch_size</span>=<span class="cm-number">1024</span>, <span class="cm-variable">epochs</span>=<span class="cm-number">10</span>, <span class="cm-variable">validation_split</span>=<span class="cm-number">0.2</span>,<span class="cm-variable">verbose</span>=<span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># Print prediction(s)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-variable">logits_to_text</span>(<span class="cm-variable">simple_rnn_model</span>.<span class="cm-property">predict</span>(<span class="cm-variable">tmp_x</span>[:<span class="cm-number">1</span>])[<span class="cm-number">0</span>], <span class="cm-variable">french_tokenizer</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 61px;"></div><div class="CodeMirror-gutters" style="display: none; height: 80px;"></div></div></div></div></div></div><div class="widget-area" style="display: none;"><div class="prompt"><button class="close">×</button></div><div class="widget-subarea jp-Output-result"></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to unscroll output; double click to hide" style=""></div><div class="output output_scroll" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>Train on 110288 samples, validate on 27573 samples
Epoch 1/10
4s - loss: 1.1994 - acc: 0.6530 - val_loss: 1.1729 - val_acc: 0.6509
Epoch 2/10
4s - loss: 1.1571 - acc: 0.6586 - val_loss: 1.1496 - val_acc: 0.6621
Epoch 3/10
4s - loss: 1.1251 - acc: 0.6626 - val_loss: 1.1071 - val_acc: 0.6675
Epoch 4/10
4s - loss: 1.0962 - acc: 0.6682 - val_loss: 1.0957 - val_acc: 0.6672
Epoch 5/10
4s - loss: 1.0768 - acc: 0.6726 - val_loss: 1.0633 - val_acc: 0.6764
Epoch 6/10
5s - loss: 1.0567 - acc: 0.6780 - val_loss: 1.0444 - val_acc: 0.6887
Epoch 7/10
4s - loss: 1.0394 - acc: 0.6829 - val_loss: 1.0270 - val_acc: 0.6912
Epoch 8/10
4s - loss: 1.0244 - acc: 0.6876 - val_loss: 1.0237 - val_acc: 0.6786
Epoch 9/10
4s - loss: 1.0085 - acc: 0.6924 - val_loss: 1.0022 - val_acc: 0.6921
Epoch 10/10
4s - loss: 0.9936 - acc: 0.6970 - val_loss: 0.9802 - val_acc: 0.7056
new jersey est parfois calme en mois de il et il en en &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt;
</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell text_cell rendered unselected" tabindex="2"><div class="prompt input_prompt"></div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; padding-right: 0px; padding-bottom: 0px; margin-bottom: -11px; border-right-width: 19px; min-height: 112px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 17.3335px;">&nbsp;</div></div><div class="CodeMirror-code" style=""><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-3">### Model 2: Embedding (IMPLEMENTATION)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-image cm-image-marker">!</span><span class="cm-image cm-image-alt-text cm-link">[RNN]</span><span class="cm-string cm-url">(images/embedding.png)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">You've turned the words into ids, but there's a better representation of a word.  This is called word embeddings.  An embedding is a vector representation of the word that is close to similar words in n-dimensional space, where the n represents the size of the embedding vectors.</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">In this model, you'll create a RNN model using embedding.</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 112px;"></div><div class="CodeMirror-gutters" style="display: none; height: 131px;"></div></div></div></div><div class="text_cell_render rendered_html" tabindex="-1"><h3 id="Model-2:-Embedding-(IMPLEMENTATION)-153" saveid="Model-2:-Embedding-(IMPLEMENTATION)"><span class="toc-item-num">1.5.3&nbsp;&nbsp;</span><a name="Model-2:-Embedding-(IMPLEMENTATION)"></a>Model 2: Embedding (IMPLEMENTATION)<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Model-2:-Embedding-(IMPLEMENTATION)">¶</a></h3>
<p><img src="./machine_translation_files/embedding.png" alt="RNN">
You've turned the words into ids, but there's a better representation of a word.  This is called word embeddings.  An embedding is a vector representation of the word that is close to similar words in n-dimensional space, where the n represents the size of the embedding vectors.</p>
<p>In this model, you'll create a RNN model using embedding.</p>
</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[14]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 272.258px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 11px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true" style="right: 0px; left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true" style="height: 11px; width: 11px;"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" draggable="false"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 787px; margin-bottom: -11px; border-right-width: 19px; min-height: 728px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"><div class="CodeMirror-selected" style="position: absolute; left: 0px; top: 250px; width: 848px; height: 17px;"></div><div class="CodeMirror-selected" style="position: absolute; left: 0px; top: 267px; width: 0px; height: 16px;"></div></div><div class="CodeMirror-cursors" style="visibility: hidden;"></div><div class="CodeMirror-code" style=""><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">layers</span>.<span class="cm-property">embeddings</span> <span class="cm-keyword">import</span> <span class="cm-variable">Embedding</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">embed_model</span>(<span class="cm-variable">input_shape</span>, <span class="cm-variable">output_sequence_length</span>, <span class="cm-variable">english_vocab_size</span>, <span class="cm-variable">french_vocab_size</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-string">"""</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    Build and train a RNN model using word embedding on x and y</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param input_shape: Tuple of input shape</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param output_sequence_length: Length of output sequence</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param english_vocab_size: Number of unique English words in the dataset</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param french_vocab_size: Number of unique French words in the dataset</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :return: Keras model built, but not trained</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    """</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment"># TODO: Implement</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">main_inputs</span> = <span class="cm-variable">Input</span>(<span class="cm-variable">shape</span>=<span class="cm-variable">input_shape</span>[<span class="cm-number">1</span>:<span class="cm-number">3</span>]) </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">x</span> = <span class="cm-variable">Embedding</span>(<span class="cm-variable">english_vocab_size</span>, <span class="cm-number">16</span>)(<span class="cm-variable">main_inputs</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">x</span> = <span class="cm-variable">GRU</span>(<span class="cm-variable">units</span>=<span class="cm-number">64</span>,<span class="cm-variable">return_sequences</span>=<span class="cm-keyword">True</span>)(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">main_outputs</span> = <span class="cm-variable">TimeDistributed</span>(<span class="cm-variable">Dense</span>(<span class="cm-variable">french_vocab_size</span>,<span class="cm-variable">activation</span>=<span class="cm-string">'softmax'</span>))(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">model</span> = <span class="cm-variable">Model</span>(<span class="cm-variable">inputs</span>=<span class="cm-variable">main_inputs</span>, <span class="cm-variable">outputs</span>=<span class="cm-variable">main_outputs</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">learning_rate</span> = <span class="cm-number">0.01</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">model</span>.<span class="cm-property">compile</span>(<span class="cm-variable">loss</span>=<span class="cm-variable">sparse_categorical_crossentropy</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                  <span class="cm-variable">optimizer</span>=<span class="cm-variable">Adam</span>(<span class="cm-variable">learning_rate</span>),</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                  <span class="cm-variable">metrics</span>=[<span class="cm-string">'accuracy'</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-variable">model</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">tests</span>.<span class="cm-property">test_embed_model</span>(<span class="cm-variable">embed_model</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># TODO: Reshape the input</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">tmp_x</span> = <span class="cm-variable">pad</span>(<span class="cm-variable">preproc_english_sentences</span>, <span class="cm-variable">preproc_french_sentences</span>.<span class="cm-property">shape</span>[<span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">tmp_x</span> = <span class="cm-variable">tmp_x</span>.<span class="cm-property">reshape</span>((<span class="cm-operator">-</span><span class="cm-number">1</span>, <span class="cm-variable">preproc_french_sentences</span>.<span class="cm-property">shape</span>[<span class="cm-operator">-</span><span class="cm-number">2</span>],))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># TODO: Train the neural network</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">embed_rnn_model</span> = <span class="cm-variable">embed_model</span>(</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">tmp_x</span>.<span class="cm-property">shape</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">preproc_french_sentences</span>.<span class="cm-property">shape</span>[<span class="cm-number">1</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">len</span>(<span class="cm-variable">english_tokenizer</span>.<span class="cm-property">word_index</span>)<span class="cm-operator">+</span><span class="cm-number">1</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">len</span>(<span class="cm-variable">french_tokenizer</span>.<span class="cm-property">word_index</span>)<span class="cm-operator">+</span><span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">embed_rnn_model</span>.<span class="cm-property">summary</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">embed_rnn_model</span>.<span class="cm-property">fit</span>(<span class="cm-variable">tmp_x</span>, <span class="cm-variable">preproc_french_sentences</span>, <span class="cm-variable">batch_size</span>=<span class="cm-number">1024</span>, <span class="cm-variable">epochs</span>=<span class="cm-number">10</span>, <span class="cm-variable">validation_split</span>=<span class="cm-number">0.2</span>,<span class="cm-variable">verbose</span>=<span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># TODO: Print prediction(s)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-variable">logits_to_text</span>(<span class="cm-variable">embed_rnn_model</span>.<span class="cm-property">predict</span>(<span class="cm-variable">tmp_x</span>[:<span class="cm-number">1</span>])[<span class="cm-number">0</span>], <span class="cm-variable">french_tokenizer</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 728px;"></div><div class="CodeMirror-gutters" style="display: none; height: 747px;"></div></div></div></div></div></div><div class="widget-area" style="display: none;"><div class="prompt"><button class="close">×</button></div><div class="widget-subarea jp-Output-result"></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to scroll output; double click to hide" style=""></div><div class="output" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
input_5 (InputLayer)         (None, 21)                0         
_________________________________________________________________
embedding_4 (Embedding)      (None, 21, 16)            3200      
_________________________________________________________________
gru_5 (GRU)                  (None, 21, 64)            15552     
_________________________________________________________________
time_distributed_5 (TimeDist (None, 21, 346)           22490     
=================================================================
Total params: 41,242
Trainable params: 41,242
Non-trainable params: 0
_________________________________________________________________
Train on 110288 samples, validate on 27573 samples
Epoch 1/10
6s - loss: 2.6588 - acc: 0.4695 - val_loss: 1.6762 - val_acc: 0.5873
Epoch 2/10
5s - loss: 1.1866 - acc: 0.6993 - val_loss: 0.8418 - val_acc: 0.7734
Epoch 3/10
5s - loss: 0.6898 - acc: 0.8065 - val_loss: 0.5731 - val_acc: 0.8327
Epoch 4/10
5s - loss: 0.5127 - acc: 0.8498 - val_loss: 0.4600 - val_acc: 0.8621
Epoch 5/10
5s - loss: 0.4313 - acc: 0.8713 - val_loss: 0.3999 - val_acc: 0.8816
Epoch 6/10
5s - loss: 0.3772 - acc: 0.8868 - val_loss: 0.3608 - val_acc: 0.8912
Epoch 7/10
5s - loss: 0.3445 - acc: 0.8949 - val_loss: 0.3356 - val_acc: 0.8976
Epoch 8/10
5s - loss: 0.3204 - acc: 0.9008 - val_loss: 0.3162 - val_acc: 0.9013
Epoch 9/10
5s - loss: 0.3057 - acc: 0.9044 - val_loss: 0.2993 - val_acc: 0.9070
Epoch 10/10
5s - loss: 0.2933 - acc: 0.9082 - val_loss: 0.2931 - val_acc: 0.9075
new jersey est parfois calme au l' et l' automne est est avril avril &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt;
</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell text_cell rendered unselected" tabindex="2"><div class="prompt input_prompt"></div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; padding-right: 0px; padding-bottom: 0px; margin-bottom: -11px; border-right-width: 19px; min-height: 79px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 17.3335px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-3">### Model 3: Bidirectional RNNs (IMPLEMENTATION)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-image cm-image-marker">!</span><span class="cm-image cm-image-alt-text cm-link">[RNN]</span><span class="cm-string cm-url">(images/bidirectional.png)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">One restriction of a RNN is that it can't see the future input, only the past.  This is where bidirectional recurrent neural networks come in.  They are able to see the future data.</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 79px;"></div><div class="CodeMirror-gutters" style="display: none; height: 98px;"></div></div></div></div><div class="text_cell_render rendered_html" tabindex="-1"><h3 id="Model-3:-Bidirectional-RNNs-(IMPLEMENTATION)-154" saveid="Model-3:-Bidirectional-RNNs-(IMPLEMENTATION)"><span class="toc-item-num">1.5.4&nbsp;&nbsp;</span><a name="Model-3:-Bidirectional-RNNs-(IMPLEMENTATION)"></a>Model 3: Bidirectional RNNs (IMPLEMENTATION)<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Model-3:-Bidirectional-RNNs-(IMPLEMENTATION)">¶</a></h3>
<p><img src="./machine_translation_files/bidirectional.png" alt="RNN">
One restriction of a RNN is that it can't see the future input, only the past.  This is where bidirectional recurrent neural networks come in.  They are able to see the future data.</p>
</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[16]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 238.925px; left: 159.594px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 11px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true" style="right: 0px; left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true" style="height: 11px; width: 11px;"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" draggable="false"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 766px; margin-bottom: -11px; border-right-width: 19px; min-height: 645px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"><div class="CodeMirror-selected" style="position: absolute; left: 56px; top: 233px; width: 98px; height: 17px;"></div></div><div class="CodeMirror-cursors" style=""></div><div class="CodeMirror-code" style=""><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">layers</span> <span class="cm-keyword">import</span> <span class="cm-variable">Bidirectional</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">bd_model</span>(<span class="cm-variable">input_shape</span>, <span class="cm-variable">output_sequence_length</span>, <span class="cm-variable">english_vocab_size</span>, <span class="cm-variable">french_vocab_size</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-string">"""</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    Build and train a bidirectional RNN model on x and y</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param input_shape: Tuple of input shape</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param output_sequence_length: Length of output sequence</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param english_vocab_size: Number of unique English words in the dataset</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param french_vocab_size: Number of unique French words in the dataset</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :return: Keras model built, but not trained</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    """</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment"># TODO: Implement</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">main_inputs</span> = <span class="cm-variable">Input</span>(<span class="cm-variable">shape</span>=<span class="cm-variable">input_shape</span>[<span class="cm-number">1</span>:<span class="cm-number">3</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">x</span> = <span class="cm-variable">Bidirectional</span>(<span class="cm-variable">GRU</span>(<span class="cm-variable">units</span>=<span class="cm-number">64</span>,<span class="cm-variable">return_sequences</span>=<span class="cm-keyword">True</span>))(<span class="cm-variable">main_inputs</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">main_outputs</span> = <span class="cm-variable">TimeDistributed</span>(<span class="cm-variable">Dense</span>(<span class="cm-variable">french_vocab_size</span>,<span class="cm-variable">activation</span>=<span class="cm-string">'softmax'</span>))(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">model</span> = <span class="cm-variable">Model</span>(<span class="cm-variable">inputs</span>=<span class="cm-variable">main_inputs</span>, <span class="cm-variable">outputs</span>=<span class="cm-variable">main_outputs</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">learning_rate</span> = <span class="cm-number">0.01</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">model</span>.<span class="cm-property">compile</span>(<span class="cm-variable">loss</span>=<span class="cm-variable">sparse_categorical_crossentropy</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                  <span class="cm-variable">optimizer</span>=<span class="cm-variable">Adam</span>(<span class="cm-variable">learning_rate</span>),</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                  <span class="cm-variable">metrics</span>=[<span class="cm-string">'accuracy'</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-variable">model</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">tests</span>.<span class="cm-property">test_bd_model</span>(<span class="cm-variable">bd_model</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">tmp_x</span> = <span class="cm-variable">pad</span>(<span class="cm-variable">preproc_english_sentences</span>, <span class="cm-variable">preproc_french_sentences</span>.<span class="cm-property">shape</span>[<span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">tmp_x</span> = <span class="cm-variable">tmp_x</span>.<span class="cm-property">reshape</span>((<span class="cm-operator">-</span><span class="cm-number">1</span>, <span class="cm-variable">preproc_french_sentences</span>.<span class="cm-property">shape</span>[<span class="cm-operator">-</span><span class="cm-number">2</span>],<span class="cm-number">1</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># TODO: Train and Print prediction(s)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">bd_rnn_model</span> = <span class="cm-variable">bd_model</span>(</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">tmp_x</span>.<span class="cm-property">shape</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">preproc_french_sentences</span>.<span class="cm-property">shape</span>[<span class="cm-number">1</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">len</span>(<span class="cm-variable">english_tokenizer</span>.<span class="cm-property">word_index</span>)<span class="cm-operator">+</span><span class="cm-number">1</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">len</span>(<span class="cm-variable">french_tokenizer</span>.<span class="cm-property">word_index</span>)<span class="cm-operator">+</span><span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">bd_rnn_model</span>.<span class="cm-property">summary</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">bd_rnn_model</span>.<span class="cm-property">fit</span>(<span class="cm-variable">tmp_x</span>, <span class="cm-variable">preproc_french_sentences</span>, <span class="cm-variable">batch_size</span>=<span class="cm-number">1024</span>, <span class="cm-variable">epochs</span>=<span class="cm-number">10</span>, <span class="cm-variable">validation_split</span>=<span class="cm-number">0.2</span>,<span class="cm-variable">verbose</span>=<span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># TODO: Print prediction(s)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-variable">logits_to_text</span>(<span class="cm-variable">bd_rnn_model</span>.<span class="cm-property">predict</span>(<span class="cm-variable">tmp_x</span>[:<span class="cm-number">1</span>])[<span class="cm-number">0</span>], <span class="cm-variable">french_tokenizer</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 645px;"></div><div class="CodeMirror-gutters" style="display: none; height: 664px;"></div></div></div></div></div></div><div class="widget-area" style="display: none;"><div class="prompt"><button class="close">×</button></div><div class="widget-subarea jp-Output-result"></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to scroll output; double click to hide" style=""></div><div class="output" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
input_9 (InputLayer)         (None, 21, 1)             0         
_________________________________________________________________
bidirectional_4 (Bidirection (None, 21, 128)           25344     
_________________________________________________________________
time_distributed_9 (TimeDist (None, 21, 346)           44634     
=================================================================
Total params: 69,978
Trainable params: 69,978
Non-trainable params: 0
_________________________________________________________________
Train on 110288 samples, validate on 27573 samples
Epoch 1/10
10s - loss: 1.8338 - acc: 0.5781 - val_loss: 1.2817 - val_acc: 0.6460
Epoch 2/10
8s - loss: 1.1816 - acc: 0.6606 - val_loss: 1.1065 - val_acc: 0.6712
Epoch 3/10
8s - loss: 1.0636 - acc: 0.6771 - val_loss: 1.0269 - val_acc: 0.6802
Epoch 4/10
8s - loss: 1.0024 - acc: 0.6854 - val_loss: 0.9787 - val_acc: 0.6883
Epoch 5/10
8s - loss: 0.9653 - acc: 0.6911 - val_loss: 0.9454 - val_acc: 0.6947
Epoch 6/10
8s - loss: 0.9321 - acc: 0.6980 - val_loss: 0.9226 - val_acc: 0.7025
Epoch 7/10
8s - loss: 0.9072 - acc: 0.7042 - val_loss: 0.8996 - val_acc: 0.7079
Epoch 8/10
8s - loss: 0.8842 - acc: 0.7108 - val_loss: 0.8737 - val_acc: 0.7155
Epoch 9/10
8s - loss: 0.8704 - acc: 0.7133 - val_loss: 0.8566 - val_acc: 0.7188
Epoch 10/10
8s - loss: 0.8521 - acc: 0.7188 - val_loss: 0.8530 - val_acc: 0.7196
new jersey est parfois calme au mois et il et il en en &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt;
</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell text_cell rendered unselected" tabindex="2"><div class="prompt input_prompt"></div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; padding-right: 0px; padding-bottom: 0px; margin-bottom: -11px; border-right-width: 19px; min-height: 95px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 17.333px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-3">### Model 4: Encoder-Decoder (OPTIONAL)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">Time to look at encoder-decoder models.  This model is made up of an encoder and decoder. The encoder creates a matrix representation of the sentence.  The decoder takes this matrix as input and predicts the translation as output.</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">Create an encoder-decoder model in the cell below.</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 95px;"></div><div class="CodeMirror-gutters" style="display: none; height: 114px;"></div></div></div></div><div class="text_cell_render rendered_html" tabindex="-1"><h3 id="Model-4:-Encoder-Decoder-(OPTIONAL)-155" saveid="Model-4:-Encoder-Decoder-(OPTIONAL)"><span class="toc-item-num">1.5.5&nbsp;&nbsp;</span><a name="Model-4:-Encoder-Decoder-(OPTIONAL)"></a>Model 4: Encoder-Decoder (OPTIONAL)<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Model-4:-Encoder-Decoder-(OPTIONAL)">¶</a></h3>
<p>Time to look at encoder-decoder models.  This model is made up of an encoder and decoder. The encoder creates a matrix representation of the sentence.  The decoder takes this matrix as input and predicts the translation as output.</p>
<p>Create an encoder-decoder model in the cell below.</p>
</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[19]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 322.266px; left: 334.594px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 11px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true" style="right: 0px; left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true" style="height: 11px; width: 11px;"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" draggable="false"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 794px; margin-bottom: -11px; border-right-width: 19px; min-height: 878px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style="visibility: hidden;"><div class="CodeMirror-cursor" style="left: 329px; top: 316.673px; height: 16.6666px;">&nbsp;</div></div><div class="CodeMirror-code" style=""><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">layers</span> <span class="cm-keyword">import</span> <span class="cm-variable">RepeatVector</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">layers</span> <span class="cm-keyword">import</span> <span class="cm-variable">GRU</span>, <span class="cm-variable">Input</span>, <span class="cm-variable">Dense</span>, <span class="cm-variable">TimeDistributed</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">models</span> <span class="cm-keyword">import</span> <span class="cm-variable">Model</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">layers</span> <span class="cm-keyword">import</span> <span class="cm-variable">Activation</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">optimizers</span> <span class="cm-keyword">import</span> <span class="cm-variable">Adam</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">losses</span> <span class="cm-keyword">import</span> <span class="cm-variable">sparse_categorical_crossentropy</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">layers</span> <span class="cm-keyword">import</span> <span class="cm-variable">Bidirectional</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">layers</span>.<span class="cm-property">embeddings</span> <span class="cm-keyword">import</span> <span class="cm-variable">Embedding</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">encdec_model</span>(<span class="cm-variable">input_shape</span>, <span class="cm-variable">output_sequence_length</span>, <span class="cm-variable">english_vocab_size</span>, <span class="cm-variable">french_vocab_size</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-string">"""</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    Build and train an encoder-decoder model on x and y</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param input_shape: Tuple of input shape</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param output_sequence_length: Length of output sequence</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param english_vocab_size: Number of unique English words in the dataset</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param french_vocab_size: Number of unique French words in the dataset</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :return: Keras model built, but not trained</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    """</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment"># OPTIONAL: Implement </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">main_inputs</span> = <span class="cm-variable">Input</span>(<span class="cm-variable">shape</span>=<span class="cm-variable">input_shape</span>[<span class="cm-number">1</span>:<span class="cm-number">3</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">encoded</span> = <span class="cm-variable">GRU</span>(<span class="cm-variable">units</span>=<span class="cm-number">64</span>)(<span class="cm-variable">main_inputs</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">decoded</span> = <span class="cm-variable">RepeatVector</span>(<span class="cm-variable">output_sequence_length</span>)(<span class="cm-variable">encoded</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">decoded</span> = <span class="cm-variable">GRU</span>(<span class="cm-number">64</span>, <span class="cm-variable">return_sequences</span>=<span class="cm-keyword">True</span>)(<span class="cm-variable">decoded</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">main_outputs</span> = <span class="cm-variable">TimeDistributed</span>(<span class="cm-variable">Dense</span>(<span class="cm-variable">french_vocab_size</span>,<span class="cm-variable">activation</span>=<span class="cm-string">'softmax'</span>))(<span class="cm-variable">decoded</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">model</span> = <span class="cm-variable">Model</span>(<span class="cm-variable">inputs</span>=<span class="cm-variable">main_inputs</span>, <span class="cm-variable">outputs</span>=<span class="cm-variable">main_outputs</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">learning_rate</span> = <span class="cm-number">0.01</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">model</span>.<span class="cm-property">compile</span>(<span class="cm-variable">loss</span>=<span class="cm-variable">sparse_categorical_crossentropy</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                  <span class="cm-variable">optimizer</span>=<span class="cm-variable">Adam</span>(<span class="cm-variable">learning_rate</span>),</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                  <span class="cm-variable">metrics</span>=[<span class="cm-string">'accuracy'</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">learning_rate</span> = <span class="cm-number">0.01</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">model</span>.<span class="cm-property">compile</span>(<span class="cm-variable">loss</span>=<span class="cm-variable">sparse_categorical_crossentropy</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                  <span class="cm-variable">optimizer</span>=<span class="cm-variable">Adam</span>(<span class="cm-variable">learning_rate</span>),</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                  <span class="cm-variable">metrics</span>=[<span class="cm-string">'accuracy'</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-variable">model</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">tests</span>.<span class="cm-property">test_encdec_model</span>(<span class="cm-variable">encdec_model</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">tmp_x</span> = <span class="cm-variable">pad</span>(<span class="cm-variable">preproc_english_sentences</span>, <span class="cm-variable">preproc_french_sentences</span>.<span class="cm-property">shape</span>[<span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">tmp_x</span> = <span class="cm-variable">tmp_x</span>.<span class="cm-property">reshape</span>((<span class="cm-operator">-</span><span class="cm-number">1</span>, <span class="cm-variable">preproc_french_sentences</span>.<span class="cm-property">shape</span>[<span class="cm-operator">-</span><span class="cm-number">2</span>],<span class="cm-number">1</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># TODO: Train and Print prediction(s)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">encdec_rnn_model</span> = <span class="cm-variable">encdec_model</span>(</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">tmp_x</span>.<span class="cm-property">shape</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">preproc_french_sentences</span>.<span class="cm-property">shape</span>[<span class="cm-number">1</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">len</span>(<span class="cm-variable">english_tokenizer</span>.<span class="cm-property">word_index</span>)<span class="cm-operator">+</span><span class="cm-number">1</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">len</span>(<span class="cm-variable">french_tokenizer</span>.<span class="cm-property">word_index</span>)<span class="cm-operator">+</span><span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">encdec_rnn_model</span>.<span class="cm-property">summary</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">encdec_rnn_model</span>.<span class="cm-property">fit</span>(<span class="cm-variable">tmp_x</span>, <span class="cm-variable">preproc_french_sentences</span>, <span class="cm-variable">batch_size</span>=<span class="cm-number">1024</span>, <span class="cm-variable">epochs</span>=<span class="cm-number">10</span>, <span class="cm-variable">validation_split</span>=<span class="cm-number">0.2</span>,<span class="cm-variable">verbose</span>=<span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># TODO: Print prediction(s)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-variable">logits_to_text</span>(<span class="cm-variable">encdec_rnn_model</span>.<span class="cm-property">predict</span>(<span class="cm-variable">tmp_x</span>[:<span class="cm-number">1</span>])[<span class="cm-number">0</span>], <span class="cm-variable">french_tokenizer</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 878px;"></div><div class="CodeMirror-gutters" style="display: none; height: 897px;"></div></div></div></div></div></div><div class="widget-area" style="display: none;"><div class="prompt"><button class="close">×</button></div><div class="widget-subarea jp-Output-result"></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to unscroll output; double click to hide" style=""></div><div class="output output_scroll" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
input_13 (InputLayer)        (None, 21, 1)             0         
_________________________________________________________________
gru_16 (GRU)                 (None, 64)                12672     
_________________________________________________________________
repeat_vector_4 (RepeatVecto (None, 21, 64)            0         
_________________________________________________________________
gru_17 (GRU)                 (None, 21, 64)            24768     
_________________________________________________________________
time_distributed_13 (TimeDis (None, 21, 346)           22490     
=================================================================
Total params: 59,930
Trainable params: 59,930
Non-trainable params: 0
_________________________________________________________________
Train on 110288 samples, validate on 27573 samples
Epoch 1/10
12s - loss: 2.8149 - acc: 0.4416 - val_loss: 2.3988 - val_acc: 0.4711
Epoch 2/10
8s - loss: 2.2025 - acc: 0.5065 - val_loss: 2.0264 - val_acc: 0.5316
Epoch 3/10
8s - loss: 1.9030 - acc: 0.5367 - val_loss: 1.7811 - val_acc: 0.5528
Epoch 4/10
8s - loss: 1.7048 - acc: 0.5574 - val_loss: 1.6447 - val_acc: 0.5659
Epoch 5/10
8s - loss: 1.6165 - acc: 0.5716 - val_loss: 1.5718 - val_acc: 0.5841
Epoch 6/10
8s - loss: 1.5549 - acc: 0.5840 - val_loss: 1.5271 - val_acc: 0.5831
Epoch 7/10
8s - loss: 1.4993 - acc: 0.5931 - val_loss: 1.4740 - val_acc: 0.5993
Epoch 8/10
8s - loss: 1.4593 - acc: 0.6008 - val_loss: 1.4760 - val_acc: 0.6001
Epoch 9/10
8s - loss: 1.4239 - acc: 0.6088 - val_loss: 1.3998 - val_acc: 0.6152
Epoch 10/10
8s - loss: 1.3956 - acc: 0.6135 - val_loss: 1.4021 - val_acc: 0.6069
new jersey est jamais agr茅able en mois et il est est est en &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt;
</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell text_cell rendered unselected" tabindex="2"><div class="prompt input_prompt"></div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; padding-right: 0px; padding-bottom: 0px; margin-bottom: -11px; border-right-width: 19px; min-height: 45px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 17.333px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-3">### Model 5: Custom (IMPLEMENTATION)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">Use everything you learned from the previous models to create a model that incorporates embedding and a bidirectional rnn into one model.</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 45px;"></div><div class="CodeMirror-gutters" style="display: none; height: 64px;"></div></div></div></div><div class="text_cell_render rendered_html" tabindex="-1"><h3 id="Model-5:-Custom-(IMPLEMENTATION)-156" saveid="Model-5:-Custom-(IMPLEMENTATION)"><span class="toc-item-num">1.5.6&nbsp;&nbsp;</span><a name="Model-5:-Custom-(IMPLEMENTATION)"></a>Model 5: Custom (IMPLEMENTATION)<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Model-5:-Custom-(IMPLEMENTATION)">¶</a></h3>
<p>Use everything you learned from the previous models to create a model that incorporates embedding and a bidirectional rnn into one model.</p>
</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[51]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 738.937px; left: 551.594px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 11px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true" style="right: 0px; left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true" style="height: 11px; width: 11px;"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" draggable="false"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 787px; margin-bottom: -11px; border-right-width: 19px; min-height: 778px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style=""><div class="CodeMirror-cursor" style="left: 546px; top: 733.343px; height: 16.6667px;">&nbsp;</div></div><div class="CodeMirror-code" style=""><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">layers</span> <span class="cm-keyword">import</span> <span class="cm-variable">RepeatVector</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">layers</span> <span class="cm-keyword">import</span> <span class="cm-variable">GRU</span>, <span class="cm-variable">Input</span>, <span class="cm-variable">Dense</span>, <span class="cm-variable">TimeDistributed</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">models</span> <span class="cm-keyword">import</span> <span class="cm-variable">Model</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">layers</span> <span class="cm-keyword">import</span> <span class="cm-variable">Activation</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">optimizers</span> <span class="cm-keyword">import</span> <span class="cm-variable">Adam</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">losses</span> <span class="cm-keyword">import</span> <span class="cm-variable">sparse_categorical_crossentropy</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">layers</span>.<span class="cm-property">embeddings</span> <span class="cm-keyword">import</span> <span class="cm-variable">Embedding</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras_tqdm</span> <span class="cm-keyword">import</span> <span class="cm-variable">TQDMNotebookCallback</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">model_final</span>(<span class="cm-variable">input_shape</span>, <span class="cm-variable">output_sequence_length</span>, <span class="cm-variable">english_vocab_size</span>, <span class="cm-variable">french_vocab_size</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-string">"""</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    Build and train a model that incorporates embedding, encoder-decoder, and bidirectional RNN on x and y</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param input_shape: Tuple of input shape</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param output_sequence_length: Length of output sequence</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param english_vocab_size: Number of unique English words in the dataset</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param french_vocab_size: Number of unique French words in the dataset</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :return: Keras model built, but not trained</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    """</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">main_inputs</span> = <span class="cm-variable">Input</span>(<span class="cm-variable">shape</span>=<span class="cm-variable">input_shape</span>[<span class="cm-number">1</span>:<span class="cm-number">3</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">x</span> = <span class="cm-variable">Embedding</span>(<span class="cm-variable">english_vocab_size</span>, <span class="cm-number">16</span>)(<span class="cm-variable">main_inputs</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">encoded</span> = <span class="cm-variable">Bidirectional</span>(<span class="cm-variable">GRU</span>(<span class="cm-variable">units</span>=<span class="cm-number">64</span>))(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">decoded</span> = <span class="cm-variable">RepeatVector</span>(<span class="cm-variable">output_sequence_length</span>)(<span class="cm-variable">encoded</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">decoded</span> = <span class="cm-variable">Bidirectional</span>(<span class="cm-variable">GRU</span>(<span class="cm-number">64</span>, <span class="cm-variable">return_sequences</span>=<span class="cm-keyword">True</span>))(<span class="cm-variable">decoded</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">main_outputs</span> = <span class="cm-variable">TimeDistributed</span>(<span class="cm-variable">Dense</span>(<span class="cm-variable">french_vocab_size</span>,<span class="cm-variable">activation</span>=<span class="cm-string">'softmax'</span>))(<span class="cm-variable">decoded</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">model</span> = <span class="cm-variable">Model</span>(<span class="cm-variable">inputs</span>=<span class="cm-variable">main_inputs</span>, <span class="cm-variable">outputs</span>=<span class="cm-variable">main_outputs</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">learning_rate</span> = <span class="cm-number">0.01</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">model</span>.<span class="cm-property">compile</span>(<span class="cm-variable">loss</span>=<span class="cm-variable">sparse_categorical_crossentropy</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                  <span class="cm-variable">optimizer</span>=<span class="cm-variable">Adam</span>(<span class="cm-variable">learning_rate</span>),</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                  <span class="cm-variable">metrics</span>=[<span class="cm-string">'accuracy'</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> <span class="cm-variable">model</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">tests</span>.<span class="cm-property">test_model_final</span>(<span class="cm-variable">model_final</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">tmp_x</span> = <span class="cm-variable">pad</span>(<span class="cm-variable">preproc_english_sentences</span>, <span class="cm-variable">preproc_english_sentences</span>.<span class="cm-property">shape</span>[<span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">tmp_x</span> = <span class="cm-variable">tmp_x</span>.<span class="cm-property">reshape</span>((<span class="cm-operator">-</span><span class="cm-number">1</span>, <span class="cm-variable">preproc_english_sentences</span>.<span class="cm-property">shape</span>[<span class="cm-number">1</span>]))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment"># Train and Print prediction(s)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">final_rnn_model</span> = <span class="cm-variable">model_final</span>(</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">tmp_x</span>.<span class="cm-property">shape</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">preproc_french_sentences</span>.<span class="cm-property">shape</span>[<span class="cm-number">1</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">len</span>(<span class="cm-variable">english_tokenizer</span>.<span class="cm-property">word_index</span>)<span class="cm-operator">+</span><span class="cm-number">1</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">len</span>(<span class="cm-variable">french_tokenizer</span>.<span class="cm-property">word_index</span>)<span class="cm-operator">+</span><span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">final_rnn_model</span>.<span class="cm-property">summary</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">final_rnn_model</span>.<span class="cm-property">fit</span>(<span class="cm-variable">tmp_x</span>, <span class="cm-variable">preproc_french_sentences</span>, <span class="cm-variable">batch_size</span>=<span class="cm-number">1024</span>, <span class="cm-variable">epochs</span>=<span class="cm-number">30</span>, <span class="cm-variable">validation_split</span>=<span class="cm-number">0.2</span>,<span class="cm-variable">verbose</span>=<span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 778px;"></div><div class="CodeMirror-gutters" style="display: none; height: 797px;"></div></div></div></div></div></div><div class="widget-area" style="display: none;"><div class="prompt"><button class="close">×</button></div><div class="widget-subarea jp-Output-result"></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to scroll output; double click to hide" style=""></div><div class="output" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
input_39 (InputLayer)        (None, 15)                0         
_________________________________________________________________
embedding_26 (Embedding)     (None, 15, 16)            3200      
_________________________________________________________________
bidirectional_47 (Bidirectio (None, 128)               31104     
_________________________________________________________________
repeat_vector_26 (RepeatVect (None, 21, 128)           0         
_________________________________________________________________
bidirectional_48 (Bidirectio (None, 21, 128)           74112     
_________________________________________________________________
time_distributed_35 (TimeDis (None, 21, 346)           44634     
=================================================================
Total params: 153,050
Trainable params: 153,050
Non-trainable params: 0
_________________________________________________________________
Train on 110288 samples, validate on 27573 samples
Epoch 1/30
26s - loss: 2.4726 - acc: 0.4725 - val_loss: 1.7261 - val_acc: 0.5715
Epoch 2/30
15s - loss: 1.4644 - acc: 0.6153 - val_loss: 1.2296 - val_acc: 0.6638
Epoch 3/30
15s - loss: 1.0757 - acc: 0.7015 - val_loss: 0.9493 - val_acc: 0.7293
Epoch 4/30
15s - loss: 0.8684 - acc: 0.7463 - val_loss: 0.7810 - val_acc: 0.7683
Epoch 5/30
15s - loss: 0.7129 - acc: 0.7885 - val_loss: 0.6345 - val_acc: 0.8114
Epoch 6/30
15s - loss: 0.5835 - acc: 0.8262 - val_loss: 0.5248 - val_acc: 0.8425
Epoch 7/30
15s - loss: 0.4638 - acc: 0.8616 - val_loss: 0.4097 - val_acc: 0.8817
Epoch 8/30
16s - loss: 0.3604 - acc: 0.8976 - val_loss: 0.3188 - val_acc: 0.9120
Epoch 9/30
15s - loss: 0.2879 - acc: 0.9207 - val_loss: 0.2800 - val_acc: 0.9224
Epoch 10/30
15s - loss: 0.2401 - acc: 0.9347 - val_loss: 0.2494 - val_acc: 0.9311
Epoch 11/30
16s - loss: 0.2029 - acc: 0.9451 - val_loss: 0.2021 - val_acc: 0.9451
Epoch 12/30
15s - loss: 0.1924 - acc: 0.9470 - val_loss: 0.1953 - val_acc: 0.9473
Epoch 13/30
15s - loss: 0.1834 - acc: 0.9494 - val_loss: 0.1915 - val_acc: 0.9472
Epoch 14/30
15s - loss: 0.1615 - acc: 0.9552 - val_loss: 0.1584 - val_acc: 0.9558
Epoch 15/30
15s - loss: 0.1469 - acc: 0.9592 - val_loss: 0.1435 - val_acc: 0.9600
Epoch 16/30
15s - loss: 0.1353 - acc: 0.9618 - val_loss: 0.1566 - val_acc: 0.9560
Epoch 17/30
15s - loss: 0.1424 - acc: 0.9598 - val_loss: 0.1402 - val_acc: 0.9608
Epoch 18/30
15s - loss: 0.1297 - acc: 0.9632 - val_loss: 0.1731 - val_acc: 0.9505
Epoch 19/30
15s - loss: 0.1301 - acc: 0.9627 - val_loss: 0.1394 - val_acc: 0.9603
Epoch 20/30
15s - loss: 0.1132 - acc: 0.9676 - val_loss: 0.1257 - val_acc: 0.9642
Epoch 21/30
15s - loss: 0.1154 - acc: 0.9673 - val_loss: 0.1455 - val_acc: 0.9594
Epoch 22/30
15s - loss: 0.1429 - acc: 0.9592 - val_loss: 0.1438 - val_acc: 0.9592
Epoch 23/30
15s - loss: 0.1326 - acc: 0.9616 - val_loss: 0.1640 - val_acc: 0.9548
Epoch 24/30
15s - loss: 0.1186 - acc: 0.9659 - val_loss: 0.1087 - val_acc: 0.9688
Epoch 25/30
15s - loss: 0.0947 - acc: 0.9726 - val_loss: 0.1014 - val_acc: 0.9710
Epoch 26/30
15s - loss: 0.0983 - acc: 0.9717 - val_loss: 0.2311 - val_acc: 0.9340
Epoch 27/30
15s - loss: 0.1509 - acc: 0.9568 - val_loss: 0.1803 - val_acc: 0.9477
Epoch 28/30
15s - loss: 0.1117 - acc: 0.9675 - val_loss: 0.1123 - val_acc: 0.9686
Epoch 29/30
15s - loss: 0.0947 - acc: 0.9728 - val_loss: 0.1511 - val_acc: 0.9568
Epoch 30/30
15s - loss: 0.1185 - acc: 0.9657 - val_loss: 0.1504 - val_acc: 0.9585
</pre></div></div><div class="output_area"><div class="prompt output_prompt"><bdi>Out</bdi>[51]:</div><div class="output_subarea output_text output_result"><pre>&lt;keras.callbacks.History at 0x2a4c42f5668&gt;</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell text_cell rendered unselected" tabindex="2"><div class="prompt input_prompt"></div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; padding-right: 0px; padding-bottom: 0px; margin-bottom: -11px; border-right-width: 19px; min-height: 31px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 19.333px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-2">## Prediction (IMPLEMENTATION)</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 31px;"></div><div class="CodeMirror-gutters" style="display: none; height: 50px;"></div></div></div></div><div class="text_cell_render rendered_html" tabindex="-1"><h2 id="Prediction-(IMPLEMENTATION)-16" saveid="Prediction-(IMPLEMENTATION)"><span class="toc-item-num">1.6&nbsp;&nbsp;</span><a name="Prediction-(IMPLEMENTATION)"></a>Prediction (IMPLEMENTATION)<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Prediction-(IMPLEMENTATION)">¶</a></h2>
</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[52]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 238.932px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 752px; margin-bottom: -11px; border-right-width: 19px; min-height: 595px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style=""><div class="CodeMirror-cursor" style="left: 0px; top: 233.338px; height: 16.6667px;">&nbsp;</div></div><div class="CodeMirror-code" style=""><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">numpy</span> <span class="cm-keyword">as</span> <span class="cm-variable">np</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">keras</span>.<span class="cm-property">preprocessing</span>.<span class="cm-property">sequence</span> <span class="cm-keyword">import</span> <span class="cm-variable">pad_sequences</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">final_predictions</span>(<span class="cm-variable">x</span>, <span class="cm-variable">y</span>, <span class="cm-variable">x_tk</span>, <span class="cm-variable">y_tk</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-string">"""</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    Gets predictions using the final model</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param x: Preprocessed English data</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param y: Preprocessed French data</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param x_tk: English tokenizer</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    :param y_tk: French tokenizer</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">    """</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment"># TODO: Train neural network using model_final</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">model</span> = <span class="cm-variable">final_rnn_model</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-comment">## DON'T EDIT ANYTHING BELOW THIS LINE</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">y_id_to_word</span> = {<span class="cm-variable">value</span>: <span class="cm-variable">key</span> <span class="cm-keyword">for</span> <span class="cm-variable">key</span>, <span class="cm-variable">value</span> <span class="cm-keyword">in</span> <span class="cm-variable">y_tk</span>.<span class="cm-property">word_index</span>.<span class="cm-property">items</span>()}</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">y_id_to_word</span>[<span class="cm-number">0</span>] = <span class="cm-string">'&lt;PAD&gt;'</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">sentence</span> = <span class="cm-string">'he saw a old yellow truck'</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">sentence</span> = [<span class="cm-variable">x_tk</span>.<span class="cm-property">word_index</span>[<span class="cm-variable">word</span>] <span class="cm-keyword">for</span> <span class="cm-variable">word</span> <span class="cm-keyword">in</span> <span class="cm-variable">sentence</span>.<span class="cm-property">split</span>()]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">sentence</span> = <span class="cm-variable">pad_sequences</span>([<span class="cm-variable">sentence</span>], <span class="cm-variable">maxlen</span>=<span class="cm-variable">x</span>.<span class="cm-property">shape</span>[<span class="cm-operator">-</span><span class="cm-number">1</span>], <span class="cm-variable">padding</span>=<span class="cm-string">'post'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">sentences</span> = <span class="cm-variable">np</span>.<span class="cm-property">array</span>([<span class="cm-variable">sentence</span>[<span class="cm-number">0</span>], <span class="cm-variable">x</span>[<span class="cm-number">0</span>]])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-variable">predictions</span> = <span class="cm-variable">model</span>.<span class="cm-property">predict</span>(<span class="cm-variable">sentences</span>, <span class="cm-builtin">len</span>(<span class="cm-variable">sentences</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">print</span>(<span class="cm-string">'Sample 1:'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">print</span>(<span class="cm-string">' '</span>.<span class="cm-property">join</span>([<span class="cm-variable">y_id_to_word</span>[<span class="cm-variable">np</span>.<span class="cm-property">argmax</span>(<span class="cm-variable">x</span>)] <span class="cm-keyword">for</span> <span class="cm-variable">x</span> <span class="cm-keyword">in</span> <span class="cm-variable">predictions</span>[<span class="cm-number">0</span>]]))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">print</span>(<span class="cm-string">'Il a vu un vieux camion jaune'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">print</span>(<span class="cm-string">'Sample 2:'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">print</span>(<span class="cm-string">' '</span>.<span class="cm-property">join</span>([<span class="cm-variable">y_id_to_word</span>[<span class="cm-variable">np</span>.<span class="cm-property">argmax</span>(<span class="cm-variable">x</span>)] <span class="cm-keyword">for</span> <span class="cm-variable">x</span> <span class="cm-keyword">in</span> <span class="cm-variable">predictions</span>[<span class="cm-number">1</span>]]))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-builtin">print</span>(<span class="cm-string">' '</span>.<span class="cm-property">join</span>([<span class="cm-variable">y_id_to_word</span>[<span class="cm-variable">np</span>.<span class="cm-property">max</span>(<span class="cm-variable">x</span>)] <span class="cm-keyword">for</span> <span class="cm-variable">x</span> <span class="cm-keyword">in</span> <span class="cm-variable">y</span>[<span class="cm-number">0</span>]]))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">final_predictions</span>(<span class="cm-variable">preproc_english_sentences</span>, <span class="cm-variable">preproc_french_sentences</span>, <span class="cm-variable">english_tokenizer</span>, <span class="cm-variable">french_tokenizer</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 595px;"></div><div class="CodeMirror-gutters" style="display: none; height: 614px;"></div></div></div></div></div></div><div class="widget-area" style="display: none;"><div class="prompt"><button class="close">×</button></div><div class="widget-subarea jp-Output-result"></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to scroll output; double click to hide" style=""></div><div class="output" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>Sample 1:
il a vu un vieux camion jaune &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt;
Il a vu un vieux camion jaune
Sample 2:
new jersey est parfois calme pendant l' automne et il est neigeux en avril &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt;
new jersey est parfois calme pendant l' automne et il est neigeux en avril &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt; &lt;PAD&gt;
</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell text_cell rendered selected" tabindex="2"><div class="prompt input_prompt"></div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; padding-right: 0px; padding-bottom: 0px; margin-bottom: -11px; border-right-width: 19px; min-height: 147px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 19.333px;">&nbsp;</div></div><div class="CodeMirror-code" style=""><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-2">## Submission</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">When you are ready to submit your project, do the following steps:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable-2">1. Ensure you pass all points on the </span><span class="cm-link cm-variable-2">[rubric]</span><span class="cm-string cm-url cm-variable-2">(https://review.udacity.com/#!/rubrics/1004/view)</span><span class="cm-variable-2">.</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable-2">2. Submit the following in a zip file.</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable-2">- </span><span class="cm-comment cm-variable-2">`helper.py`</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable-2">- </span><span class="cm-comment cm-variable-2">`machine_translation.ipynb`</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable-2">- </span><span class="cm-comment cm-variable-2">`machine_translation.html`</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">- You can export the notebook by navigating to </span><span class="cm-strong cm-variable-3">**File -&gt; Download as -&gt; HTML (.html)**</span><span class="cm-variable-3">.</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 19px; width: 1px; border-bottom: 0px solid transparent; top: 147px;"></div><div class="CodeMirror-gutters" style="display: none; height: 166px;"></div></div></div></div><div class="text_cell_render rendered_html" tabindex="-1"><h2 id="Submission-17" saveid="Submission"><span class="toc-item-num">1.7&nbsp;&nbsp;</span><a name="Submission"></a>Submission<a class="anchor-link" href="http://localhost:8888/notebooks/machine_translation.ipynb#Submission">¶</a></h2>
<p>When you are ready to submit your project, do the following steps:</p>
<ol>
<li>Ensure you pass all points on the <a href="https://review.udacity.com/#!/rubrics/1004/view" target="_blank">rubric</a>.</li>
<li>Submit the following in a zip file.<ul>
<li><code>helper.py</code></li>
<li><code>machine_translation.ipynb</code></li>
<li><code>machine_translation.html</code><ul>
<li>You can export the notebook by navigating to <strong>File -&gt; Download as -&gt; HTML (.html)</strong>.</li>
</ul>
</li>
</ul>
</li>
</ol>
</div></div></div></div><div class="end_space"></div></div>
        <div id="tooltip" class="ipython_tooltip" style="display:none"><div class="tooltipbuttons"><a href="http://localhost:8888/notebooks/machine_translation.ipynb#" role="button" class="ui-button"><span class="ui-icon ui-icon-close">Close</span></a><a href="http://localhost:8888/notebooks/machine_translation.ipynb#" class="ui-corner-all" role="button" id="expanbutton" title="Grow the tooltip vertically (press shift-tab twice)"><span class="ui-icon ui-icon-plus">Expand</span></a><a href="http://localhost:8888/notebooks/machine_translation.ipynb#" role="button" class="ui-button" title="show the current docstring in pager (press shift-tab 4 times)"><span class="ui-icon ui-icon-arrowstop-l-n">Open in Pager</span></a><a href="http://localhost:8888/notebooks/machine_translation.ipynb#" role="button" class="ui-button" title="Tooltip will linger for 10 seconds while you type" style="display: none;"><span class="ui-icon ui-icon-clock">Close</span></a></div><div class="pretooltiparrow"></div><div class="tooltiptext smalltooltip"></div></div>
    </div>
</div>



</div>



<div id="pager" class="ui-resizable">
    <div id="pager-contents">
        <div id="pager-container" class="container"></div>
    </div>
    <div id="pager-button-area"><a role="button" title="Open the pager in an external window" class="ui-button"><span class="ui-icon ui-icon-extlink"></span></a><a role="button" title="Close the pager" class="ui-button"><span class="ui-icon ui-icon-close"></span></a></div>
<div class="ui-resizable-handle ui-resizable-n" style="z-index: 90;"></div></div>






<script type="text/javascript">
    sys_info = {"notebook_version": "5.0.0", "notebook_path": "C:\\Anaconda3\\lib\\site-packages\\notebook", "commit_source": "", "commit_hash": "", "sys_version": "3.6.0 |Anaconda custom (64-bit)| (default, Dec 23 2016, 11:57:41) [MSC v.1900 64 bit (AMD64)]", "sys_executable": "C:\\Anaconda3\\python.exe", "sys_platform": "win32", "platform": "Windows-10-10.0.14393-SP0", "os_name": "nt", "default_encoding": "utf-8"};
</script>

<script src="./machine_translation_files/encoding.js.下载" charset="utf-8"></script>

<script src="./machine_translation_files/main.min.js.下载" type="text/javascript" charset="utf-8"></script>



<script type="text/javascript">
  function _remove_token_from_url() {
    if (window.location.search.length <= 1) {
      return;
    }
    var search_parameters = window.location.search.slice(1).split('&');
    for (var i = 0; i < search_parameters.length; i++) {
      if (search_parameters[i].split('=')[0] === 'token') {
        // remote token from search parameters
        search_parameters.splice(i, 1);
        var new_search = '';
        if (search_parameters.length) {
          new_search = '?' + search_parameters.join('&');
        }
        var new_url = window.location.origin + 
                      window.location.pathname + 
                      new_search + 
                      window.location.hash;
        window.history.replaceState({}, "", new_url);
        return;
      }
    }
  }
  _remove_token_from_url();
</script>


<div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal;"></div></div><style>#toc-level0 li > a:hover {  display: block; background-color: #DAA520 }
.toc-item-highlight-select  {background-color: #FFD700}
.toc-item-highlight-execute  {background-color: #FF0000}
.toc-item-highlight-execute.toc-item-highlight-select   {background-color: #FFD700}div#menubar-container, div#header-container {
width: auto;
padding-left: 20px; }.float-wrapper, .sidebar-wrapper { background-color: #FFFFFF}#toc-level0 a, #navigate_menu a, .toc { color: #333333}#toc-wrapper .toc-item-num { color: #000000}.sidebar-wrapper { border-color: #EEEEEE}</style><div id="toc-wrapper" class="ui-draggable ui-resizable sidebar-wrapper" style="position: fixed; display: none; height: 545px; left: 0px; max-height: 617px; top: 115px;"><div id="toc-header" class="header">Contents <a href="http://localhost:8888/notebooks/machine_translation.ipynb#" class="hide-btn" title="Hide ToC">[-]</a><a href="http://localhost:8888/notebooks/machine_translation.ipynb#" class="reload-btn" title="Reload ToC">  ↻</a><span>&nbsp;&nbsp;</span><a href="http://localhost:8888/notebooks/machine_translation.ipynb#" class="number_sections-btn" title="Number text sections">n</a><span>&nbsp;&nbsp;</span><a href="http://localhost:8888/notebooks/machine_translation.ipynb#" class="toc_cell_sections-btn" title="Add a toc section in Notebook">t</a></div><div id="toc" class="toc" style="display: block; height: 521px; max-height: 597px;"><ul class="toc-item" id="toc-level0"><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Artificial-Intelligence-Nanodegree-1"><span class="toc-item-num">1&nbsp;&nbsp;</span>Artificial Intelligence Nanodegree</a><ul class="toc-item"><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Machine-Translation-Project-11"><span class="toc-item-num">1.1&nbsp;&nbsp;</span>Machine Translation Project</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Introduction-12"><span class="toc-item-num">1.2&nbsp;&nbsp;</span>Introduction</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Dataset-13"><span class="toc-item-num">1.3&nbsp;&nbsp;</span>Dataset</a><ul class="toc-item"><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Load-Data-131" class=""><span class="toc-item-num">1.3.1&nbsp;&nbsp;</span>Load Data</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Files-132" class=""><span class="toc-item-num">1.3.2&nbsp;&nbsp;</span>Files</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Vocabulary-133" class=""><span class="toc-item-num">1.3.3&nbsp;&nbsp;</span>Vocabulary</a></li></ul></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Preprocess-14"><span class="toc-item-num">1.4&nbsp;&nbsp;</span>Preprocess</a><ul class="toc-item"><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Tokenize-(IMPLEMENTATION)-141" class=""><span class="toc-item-num">1.4.1&nbsp;&nbsp;</span>Tokenize (IMPLEMENTATION)</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Padding-(IMPLEMENTATION)-142" class=""><span class="toc-item-num">1.4.2&nbsp;&nbsp;</span>Padding (IMPLEMENTATION)</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Preprocess-Pipeline-143" class=""><span class="toc-item-num">1.4.3&nbsp;&nbsp;</span>Preprocess Pipeline</a></li></ul></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Models-15"><span class="toc-item-num">1.5&nbsp;&nbsp;</span>Models</a><ul class="toc-item"><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Ids-Back-to-Text-151" class=""><span class="toc-item-num">1.5.1&nbsp;&nbsp;</span>Ids Back to Text</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Model-1:-RNN-(IMPLEMENTATION)-152" class=""><span class="toc-item-num">1.5.2&nbsp;&nbsp;</span>Model 1: RNN (IMPLEMENTATION)</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Model-2:-Embedding-(IMPLEMENTATION)-153" class=""><span class="toc-item-num">1.5.3&nbsp;&nbsp;</span>Model 2: Embedding (IMPLEMENTATION)</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Model-3:-Bidirectional-RNNs-(IMPLEMENTATION)-154" class=""><span class="toc-item-num">1.5.4&nbsp;&nbsp;</span>Model 3: Bidirectional RNNs (IMPLEMENTATION)</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Model-4:-Encoder-Decoder-(OPTIONAL)-155" class=""><span class="toc-item-num">1.5.5&nbsp;&nbsp;</span>Model 4: Encoder-Decoder (OPTIONAL)</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Model-5:-Custom-(IMPLEMENTATION)-156" class=""><span class="toc-item-num">1.5.6&nbsp;&nbsp;</span>Model 5: Custom (IMPLEMENTATION)</a></li></ul></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Prediction-(IMPLEMENTATION)-16" class=""><span class="toc-item-num">1.6&nbsp;&nbsp;</span>Prediction (IMPLEMENTATION)</a></li><li><a href="http://localhost:8888/notebooks/machine_translation.ipynb#Submission-17" class="toc-item-highlight-select"><span class="toc-item-num">1.7&nbsp;&nbsp;</span>Submission</a></li></ul></li></ul></div><div class="ui-resizable-handle ui-resizable-e" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-s" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90;"></div></div></body></html>